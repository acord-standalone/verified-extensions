(function(a,o,s,i,d,u){"use strict";function l(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var c=l(a),p=()=>s.injectCSS(".acord--fu--button{padding:4px 16px;background-color:#5865f2;height:32px;color:#fff;border-radius:3px;transition:background-color .2s ease-in-out}.acord--fu--button:hover{background-color:#4752c4}.acord--fu--packer{display:flex;flex-direction:row;gap:8px}");async function f(){const t=await g();if(!t)return d.notifications.show(o.i18n.format("ERROR_COPY"));u.copyText(`https://discord.gg/${t}`),d.notifications.show(o.i18n.format("SUCCESS_COPY"))}var h={load(){o.subscriptions.push(c.default.patch(".userInfo-regn9W",t=>{const e=c.default.parse(`<button class="acord--fu--button">${o.i18n.format("FRIEND_CODE_URL")}</button>`);e.addEventListener("click",f);const r=[...t.children],n=c.default.parse('<div class="acord--fu--packer"></div>'),C=r.pop();n.appendChild(C),n.appendChild(e),t.replaceChildren(...r,n)})),o.subscriptions.push(p())},unload(){}};async function g(){const t=i.UserStore.getCurrentUser()?.id;if(!t)return null;const e=o.persist.ghost.oldCode?.[t];if(e&&e.expires_at>Date.now())return e.code;const r=await i.InviteActions.createFriendInvite().catch(()=>null);return r?(r.inviter?.id&&(o.persist.store.oldCode[r.inviter?.id]={code:r.code,expires_at:new Date(r.expires_at).getTime()}),r.code):null}return h})($acord.dom,$acord.extension,$acord.patcher,$acord.modules.common,$acord.ui,$acord.utils);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic291cmNlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvbSBmcm9tIFwiQGFjb3JkL2RvbVwiO1xyXG5pbXBvcnQgeyBzdWJzY3JpcHRpb25zLCBwZXJzaXN0LCBpMThuIH0gZnJvbSBcIkBhY29yZC9leHRlbnNpb25cIjtcclxuaW1wb3J0IGluamVjdFNDU1MgZnJvbSBcIi4vaW5kZXguc2Nzc1wiO1xyXG5pbXBvcnQgeyBJbnZpdGVBY3Rpb25zLCBVc2VyU3RvcmUgfSBmcm9tIFwiQGFjb3JkL21vZHVsZXMvY29tbW9uXCI7XHJcbmltcG9ydCB7IG5vdGlmaWNhdGlvbnMgfSBmcm9tIFwiQGFjb3JkL3VpXCI7XHJcbmltcG9ydCB7IGNvcHlUZXh0IH0gZnJvbSBcIkBhY29yZC91dGlsc1wiO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2xpY2tUcmlnZ2VyKCkge1xyXG4gIGNvbnN0IGNvZGUgPSBhd2FpdCBnZXRGcmllbmRDb2RlKCk7XHJcbiAgaWYgKCFjb2RlKSByZXR1cm4gbm90aWZpY2F0aW9ucy5zaG93KGkxOG4uZm9ybWF0KFwiRVJST1JfQ09QWVwiKSk7XHJcbiAgY29weVRleHQoYGh0dHBzOi8vZGlzY29yZC5nZy8ke2NvZGV9YCk7XHJcbiAgbm90aWZpY2F0aW9ucy5zaG93KGkxOG4uZm9ybWF0KFwiU1VDQ0VTU19DT1BZXCIpKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGxvYWQoKSB7XHJcbiAgICBzdWJzY3JpcHRpb25zLnB1c2goZG9tLnBhdGNoKGAudXNlckluZm8tcmVnbjlXYCwgLyoqQHBhcmFtIHtFbGVtZW50fSBlbG0gKi8oZWxtKSA9PiB7XHJcbiAgICAgIC8qKiBAdHlwZSB7RWxlbWVudH0gKi9cclxuICAgICAgY29uc3QgYnRuID0gZG9tLnBhcnNlKGA8YnV0dG9uIGNsYXNzPVwiYWNvcmQtLWZ1LS1idXR0b25cIj4ke2kxOG4uZm9ybWF0KFwiRlJJRU5EX0NPREVfVVJMXCIpfTwvYnV0dG9uPmApO1xyXG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrVHJpZ2dlcik7XHJcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gWy4uLmVsbS5jaGlsZHJlbl07XHJcbiAgICAgIGNvbnN0IHBhY2tlciA9IGRvbS5wYXJzZShgPGRpdiBjbGFzcz1cImFjb3JkLS1mdS0tcGFja2VyXCI+PC9kaXY+YCk7XHJcbiAgICAgIGNvbnN0IGVkaXRCdG4gPSBjaGlsZHJlbi5wb3AoKTtcclxuICAgICAgcGFja2VyLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xyXG4gICAgICBwYWNrZXIuYXBwZW5kQ2hpbGQoYnRuKTtcclxuICAgICAgZWxtLnJlcGxhY2VDaGlsZHJlbiguLi5jaGlsZHJlbiwgcGFja2VyKTtcclxuICAgIH0pKTtcclxuICAgIHN1YnNjcmlwdGlvbnMucHVzaChpbmplY3RTQ1NTKCkpO1xyXG4gIH0sXHJcbiAgdW5sb2FkKCkgeyB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEZyaWVuZENvZGUoKSB7XHJcbiAgY29uc3QgdXNlcklkID0gVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCk/LmlkO1xyXG4gIGlmICghdXNlcklkKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCBvbGRDb2RlID0gcGVyc2lzdC5naG9zdC5vbGRDb2RlPy5bdXNlcklkXTtcclxuICBpZiAob2xkQ29kZSAmJiBvbGRDb2RlLmV4cGlyZXNfYXQgPiBEYXRlLm5vdygpKSB7XHJcbiAgICByZXR1cm4gb2xkQ29kZS5jb2RlO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY29kZSA9IGF3YWl0IEludml0ZUFjdGlvbnMuY3JlYXRlRnJpZW5kSW52aXRlKCkuY2F0Y2goKCkgPT4gbnVsbCk7XHJcbiAgaWYgKCFjb2RlKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgaWYgKGNvZGUuaW52aXRlcj8uaWQpIHBlcnNpc3Quc3RvcmUub2xkQ29kZVtjb2RlLmludml0ZXI/LmlkXSA9IHtcclxuICAgIGNvZGU6IGNvZGUuY29kZSxcclxuICAgIGV4cGlyZXNfYXQ6IG5ldyBEYXRlKGNvZGUuZXhwaXJlc19hdCkuZ2V0VGltZSgpXHJcbiAgfVxyXG4gIHJldHVybiBjb2RlLmNvZGU7XHJcbn0iXSwibmFtZXMiOlsibm90aWZpY2F0aW9ucyIsImkxOG4iLCJjb3B5VGV4dCIsInN1YnNjcmlwdGlvbnMiLCJkb20iLCJVc2VyU3RvcmUiLCJwZXJzaXN0IiwiSW52aXRlQWN0aW9ucyJdLCJtYXBwaW5ncyI6ImtnQkFNQSxlQUFlLFlBQVksR0FBRztBQUM5QixFQUFFLE1BQU0sSUFBSSxHQUFHLE1BQU0sYUFBYSxFQUFFLENBQUM7QUFDckMsRUFBRSxJQUFJLENBQUMsSUFBSTtBQUNYLElBQUksT0FBT0EsZ0JBQWEsQ0FBQyxJQUFJLENBQUNDLGNBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUN6RCxFQUFFQyxjQUFRLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsRUFBRUYsZ0JBQWEsQ0FBQyxJQUFJLENBQUNDLGNBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztBQUNsRCxDQUFDO0FBQ0QsWUFBZTtBQUNmLEVBQUUsSUFBSSxHQUFHO0FBQ1QsSUFBSUUsdUJBQWEsQ0FBQyxJQUFJLENBQUNDLHVCQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSztBQUM5RCxNQUFNLE1BQU0sR0FBRyxHQUFHQSx1QkFBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLGtDQUFrQyxFQUFFSCxjQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUM1RyxNQUFNLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDbEQsTUFBTSxNQUFNLFFBQVEsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3pDLE1BQU0sTUFBTSxNQUFNLEdBQUdHLHVCQUFHLENBQUMsS0FBSyxDQUFDLENBQUMscUNBQXFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hFLE1BQU0sTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ3JDLE1BQU0sTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNsQyxNQUFNLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDOUIsTUFBTSxHQUFHLENBQUMsZUFBZSxDQUFDLEdBQUcsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQy9DLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDUixJQUFJRCx1QkFBYSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO0FBQ3JDLEdBQUc7QUFDSCxFQUFFLE1BQU0sR0FBRztBQUNYLEdBQUc7QUFDSCxDQUFDLENBQUM7QUFDRixlQUFlLGFBQWEsR0FBRztBQUMvQixFQUFFLE1BQU0sTUFBTSxHQUFHRSxnQkFBUyxDQUFDLGNBQWMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUNoRCxFQUFFLElBQUksQ0FBQyxNQUFNO0FBQ2IsSUFBSSxPQUFPLElBQUksQ0FBQztBQUNoQixFQUFFLE1BQU0sT0FBTyxHQUFHQyxpQkFBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLENBQUM7QUFDbEQsRUFBRSxJQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtBQUNsRCxJQUFJLE9BQU8sT0FBTyxDQUFDLElBQUksQ0FBQztBQUN4QixHQUFHO0FBQ0gsRUFBRSxNQUFNLElBQUksR0FBRyxNQUFNQyxvQkFBYSxDQUFDLGtCQUFrQixFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUM7QUFDMUUsRUFBRSxJQUFJLENBQUMsSUFBSTtBQUNYLElBQUksT0FBTyxJQUFJLENBQUM7QUFDaEIsRUFBRSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFBRTtBQUN0QixJQUFJRCxpQkFBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsR0FBRztBQUM5QyxNQUFNLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtBQUNyQixNQUFNLFVBQVUsRUFBRSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxFQUFFO0FBQ3JELEtBQUssQ0FBQztBQUNOLEVBQUUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ25CIn0=
