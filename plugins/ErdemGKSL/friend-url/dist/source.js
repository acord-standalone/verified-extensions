(function(a,t,d,n,c,s){"use strict";function u(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var i=u(a),l=()=>d.injectCSS(".acord--fu--button{padding:4px 16px;background-color:#5865f2;height:32px;color:#fff;border-radius:3px;margin-left:-55px;transition:background-color .2s ease-in-out}.acord--fu--button:hover{background-color:#4752c4}");async function f(){const o=await g();if(!o)return c.notifications.show(t.i18n.format("ERROR_COPY"));s.copyText(`https://discord.gg/${o}`),c.notifications.show(t.i18n.format("SUCCESS_COPY"))}var p={load(){t.subscriptions.push(i.default.patch(".userInfo-regn9W",o=>{const e=i.default.parse(`<button class="acord--fu--button">${t.i18n.format("FRIEND_CODE_URL")}</button>`);e.addEventListener("click",f),o.appendChild(e)})),t.subscriptions.push(l())},unload(){}};async function g(){const o=n.UserStore.getCurrentUser()?.id;if(console.log(0),!o)return null;const e=t.persist.ghost.oldCode?.[o];if(e&&e.expires_at>Date.now())return console.log(1),e.code;const r=await n.InviteActions.createFriendInvite().catch(()=>null);return console.log(2,r),r?(r.inviter?.id&&(t.persist.store.oldCode[r.inviter?.id]={code:r.code,expires_at:new Date(r.expires_at).getTime()}),r.code):null}return p})($acord.dom,$acord.extension,$acord.patcher,$acord.modules.common,$acord.ui,$acord.utils);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic291cmNlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvbSBmcm9tIFwiQGFjb3JkL2RvbVwiO1xyXG5pbXBvcnQgeyBzdWJzY3JpcHRpb25zLCBwZXJzaXN0LCBpMThuIH0gZnJvbSBcIkBhY29yZC9leHRlbnNpb25cIjtcclxuaW1wb3J0IGluamVjdFNDU1MgZnJvbSBcIi4vaW5kZXguc2Nzc1wiO1xyXG5pbXBvcnQgeyBJbnZpdGVBY3Rpb25zLCBVc2VyU3RvcmUgfSBmcm9tIFwiQGFjb3JkL21vZHVsZXMvY29tbW9uXCI7XHJcbmltcG9ydCB7IG5vdGlmaWNhdGlvbnMgfSBmcm9tIFwiQGFjb3JkL3VpXCI7XHJcbmltcG9ydCB7IGNvcHlUZXh0IH0gZnJvbSBcIkBhY29yZC91dGlsc1wiO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2xpY2tUcmlnZ2VyKCkge1xyXG4gIGNvbnN0IGNvZGUgPSBhd2FpdCBnZXRGcmllbmRDb2RlKCk7XHJcbiAgaWYgKCFjb2RlKSByZXR1cm4gbm90aWZpY2F0aW9ucy5zaG93KGkxOG4uZm9ybWF0KFwiRVJST1JfQ09QWVwiKSk7XHJcbiAgY29weVRleHQoYGh0dHBzOi8vZGlzY29yZC5nZy8ke2NvZGV9YCk7XHJcbiAgbm90aWZpY2F0aW9ucy5zaG93KGkxOG4uZm9ybWF0KFwiU1VDQ0VTU19DT1BZXCIpKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGxvYWQoKSB7XHJcbiAgICBzdWJzY3JpcHRpb25zLnB1c2goZG9tLnBhdGNoKGAudXNlckluZm8tcmVnbjlXYCwgLyoqQHBhcmFtIHtFbGVtZW50fSBlbG0gKi8oZWxtKSA9PiB7XHJcbiAgICAgIC8qKiBAdHlwZSB7RWxlbWVudH0gKi9cclxuICAgICAgY29uc3QgYnRuID0gZG9tLnBhcnNlKGA8YnV0dG9uIGNsYXNzPVwiYWNvcmQtLWZ1LS1idXR0b25cIj4ke2kxOG4uZm9ybWF0KFwiRlJJRU5EX0NPREVfVVJMXCIpfTwvYnV0dG9uPmApO1xyXG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrVHJpZ2dlcik7XHJcbiAgICAgIGVsbS5hcHBlbmRDaGlsZChidG4pO1xyXG4gICAgfSkpO1xyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGluamVjdFNDU1MoKSk7XHJcbiAgfSxcclxuICB1bmxvYWQoKSB7IH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0RnJpZW5kQ29kZSgpIHtcclxuICBjb25zdCB1c2VySWQgPSBVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKT8uaWQ7XHJcbiAgY29uc29sZS5sb2coMCk7XHJcbiAgaWYgKCF1c2VySWQpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IG9sZENvZGUgPSBwZXJzaXN0Lmdob3N0Lm9sZENvZGU/Llt1c2VySWRdO1xyXG4gIGlmIChvbGRDb2RlICYmIG9sZENvZGUuZXhwaXJlc19hdCA+IERhdGUubm93KCkpIHtcclxuICAgIGNvbnNvbGUubG9nKDEpO1xyXG4gICAgcmV0dXJuIG9sZENvZGUuY29kZTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvZGUgPSBhd2FpdCBJbnZpdGVBY3Rpb25zLmNyZWF0ZUZyaWVuZEludml0ZSgpLmNhdGNoKCgpID0+IG51bGwpO1xyXG4gIGNvbnNvbGUubG9nKDIsIGNvZGUpO1xyXG4gIGlmICghY29kZSkgcmV0dXJuIG51bGw7XHJcblxyXG4gIGlmIChjb2RlLmludml0ZXI/LmlkKSBwZXJzaXN0LnN0b3JlLm9sZENvZGVbY29kZS5pbnZpdGVyPy5pZF0gPSB7XHJcbiAgICBjb2RlOiBjb2RlLmNvZGUsXHJcbiAgICBleHBpcmVzX2F0OiBuZXcgRGF0ZShjb2RlLmV4cGlyZXNfYXQpLmdldFRpbWUoKVxyXG4gIH1cclxuICByZXR1cm4gY29kZS5jb2RlO1xyXG59Il0sIm5hbWVzIjpbIm5vdGlmaWNhdGlvbnMiLCJpMThuIiwiY29weVRleHQiLCJzdWJzY3JpcHRpb25zIiwi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
