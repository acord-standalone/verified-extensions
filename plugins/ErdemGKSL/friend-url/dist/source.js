(function(a,o,d,n,i,u){"use strict";function s(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var c=s(a),f=()=>d.injectCSS(".acord--fu--button{padding:4px 16px;background-color:#5865f2;height:32px;color:#fff;border-radius:3px;margin-left:-55px;transition:background-color .2s ease-in-out}.acord--fu--button:hover{background-color:#4752c4}");async function l(){const t=await g();if(!t)return i.notifications.show(o.i18n.format("ERROR_COPY"));u.copyText(`https://discord.gg/${t}`),i.notifications.show(o.i18n.format("SUCCESS_COPY"))}var p={load(){o.subscriptions.push(c.default.patch(".userInfo-regn9W",t=>{const r=c.default.parse(`<button class="acord--fu--button">${o.i18n.format("FRIEND_CODE_URL")}</button>`);r.addEventListener("click",l),t.appendChild(r)})),o.subscriptions.push(f())},unload(){}};async function g(){const t=n.UserStore.getCurrentUser()?.id;if(!t)return null;const r=o.persist.ghost.oldCode?.[t];if(r&&r.expires_at>Date.now())return r.code;const e=await n.InviteActions.createFriendInvite().catch(()=>null);return e?(e.inviter?.id&&(o.persist.store.oldCode[e.inviter?.id]={code:e.code,expires_at:new Date(e.expires_at).getTime()}),e.code):null}return p})($acord.dom,$acord.extension,$acord.patcher,$acord.modules.common,$acord.ui,$acord.utils);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic291cmNlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvbSBmcm9tIFwiQGFjb3JkL2RvbVwiO1xyXG5pbXBvcnQgeyBzdWJzY3JpcHRpb25zLCBwZXJzaXN0LCBpMThuIH0gZnJvbSBcIkBhY29yZC9leHRlbnNpb25cIjtcclxuaW1wb3J0IGluamVjdFNDU1MgZnJvbSBcIi4vaW5kZXguc2Nzc1wiO1xyXG5pbXBvcnQgeyBJbnZpdGVBY3Rpb25zLCBVc2VyU3RvcmUgfSBmcm9tIFwiQGFjb3JkL21vZHVsZXMvY29tbW9uXCI7XHJcbmltcG9ydCB7IG5vdGlmaWNhdGlvbnMgfSBmcm9tIFwiQGFjb3JkL3VpXCI7XHJcbmltcG9ydCB7IGNvcHlUZXh0IH0gZnJvbSBcIkBhY29yZC91dGlsc1wiO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2xpY2tUcmlnZ2VyKCkge1xyXG4gIGNvbnN0IGNvZGUgPSBhd2FpdCBnZXRGcmllbmRDb2RlKCk7XHJcbiAgaWYgKCFjb2RlKSByZXR1cm4gbm90aWZpY2F0aW9ucy5zaG93KGkxOG4uZm9ybWF0KFwiRVJST1JfQ09QWVwiKSk7XHJcbiAgY29weVRleHQoYGh0dHBzOi8vZGlzY29yZC5nZy8ke2NvZGV9YCk7XHJcbiAgbm90aWZpY2F0aW9ucy5zaG93KGkxOG4uZm9ybWF0KFwiU1VDQ0VTU19DT1BZXCIpKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGxvYWQoKSB7XHJcbiAgICBzdWJzY3JpcHRpb25zLnB1c2goZG9tLnBhdGNoKGAudXNlckluZm8tcmVnbjlXYCwgLyoqQHBhcmFtIHtFbGVtZW50fSBlbG0gKi8oZWxtKSA9PiB7XHJcbiAgICAgIC8qKiBAdHlwZSB7RWxlbWVudH0gKi9cclxuICAgICAgY29uc3QgYnRuID0gZG9tLnBhcnNlKGA8YnV0dG9uIGNsYXNzPVwiYWNvcmQtLWZ1LS1idXR0b25cIj4ke2kxOG4uZm9ybWF0KFwiRlJJRU5EX0NPREVfVVJMXCIpfTwvYnV0dG9uPmApO1xyXG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrVHJpZ2dlcik7XHJcbiAgICAgIGVsbS5hcHBlbmRDaGlsZChidG4pO1xyXG4gICAgfSkpO1xyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGluamVjdFNDU1MoKSk7XHJcbiAgfSxcclxuICB1bmxvYWQoKSB7IH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0RnJpZW5kQ29kZSgpIHtcclxuICBjb25zdCB1c2VySWQgPSBVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKT8uaWQ7XHJcbiAgaWYgKCF1c2VySWQpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IG9sZENvZGUgPSBwZXJzaXN0Lmdob3N0Lm9sZENvZGU/Llt1c2VySWRdO1xyXG4gIGlmIChvbGRDb2RlICYmIG9sZENvZGUuZXhwaXJlc19hdCA+IERhdGUubm93KCkpIHtcclxuICAgIHJldHVybiBvbGRDb2RlLmNvZGU7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb2RlID0gYXdhaXQgSW52aXRlQWN0aW9ucy5jcmVhdGVGcmllbmRJbnZpdGUoKS5jYXRjaCgoKSA9PiBudWxsKTtcclxuICBpZiAoIWNvZGUpIHJldHVybiBudWxsO1xyXG5cclxuICBpZiAoY29kZS5pbnZpdGVyPy5pZCkgcGVyc2lzdC5zdG9yZS5vbGRDb2RlW2NvZGUuaW52aXRlcj8uaWRdID0ge1xyXG4gICAgY29kZTogY29kZS5jb2RlLFxyXG4gICAgZXhwaXJlc19hdDogbmV3IERhdGUoY29kZS5leHBpcmVzX2F0KS5nZXRUaW1lKClcclxuICB9XHJcbiAgcmV0dXJuIGNvZGUuY29kZTtcclxufSJdLCJuYW1lcyI6WyJub3RpZmljYXRpb25zIiwiaTE4biIsImNvcHlUZXh0Iiwic3Vic2NyaXB0aW9ucyIsImRvbSIsIlVzZXJTdG9yZSIsInBlcnNpc3QiLCJJbnZpdGVBY3Rpb25zIl0sIm1hcHBpbmdzIjoieWRBTUEsZUFBZSxZQUFZ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
