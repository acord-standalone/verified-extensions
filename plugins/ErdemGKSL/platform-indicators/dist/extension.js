(function(L,i,v,m,y,g,M,H){"use strict";function s(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var l=s(L),u=s(i),f=s(m),p=s(y),b=s(M);class T{constructor(){this.patches=[]}add(...o){this.patches.push(...o)}remove(o){let[t]=this.patches.splice(this.patches.indexOf(a=>a==o),1);t()}removeAll(){let o=this.patches.splice(0,this.patches.length);for(let t=0;t<o.length;t++)o[t]()}}var d=new T;function w(e={}){return`<svg viewBox="0 0 28 28" ${i.toHTMLProps?.(e)||""}><path fill="currentColor" d="M4 2.5C2.897 2.5 2 3.397 2 4.5V15.5C2 16.604 2.897 17.5 4 17.5H11V19.5H7V21.5H17V19.5H13V17.5H20C21.103 17.5 22 16.604 22 15.5V4.5C22 3.397 21.103 2.5 20 2.5H4ZM20 4.5V13.5H4V4.5H20Z"></path></svg>`}function V(e={}){return`<svg viewBox="0 0 32 44" ${i.toHTMLProps?.(e)||""}><path fill="currentColor" d="M 2.882812 0.246094 C 1.941406 0.550781 0.519531 2.007812 0.230469 2.953125 C 0.0585938 3.542969 0 7.234375 0 17.652344 L 0 31.554688 L 0.5 32.558594 C 1.117188 33.769531 2.152344 34.5625 3.519531 34.847656 C 4.210938 35 7.078125 35.058594 12.597656 35 C 20.441406 34.941406 20.691406 34.925781 21.441406 34.527344 C 22.347656 34.054688 23.078125 33.3125 23.578125 32.386719 C 23.921875 31.761719 23.941406 30.964844 24 18.085938 C 24.039062 8.503906 24 4.167969 23.847656 3.464844 C 23.558594 2.121094 22.75 1.097656 21.519531 0.492188 L 20.5 0 L 12.039062 0.0195312 C 6.402344 0.0390625 3.328125 0.113281 2.882812 0.246094 Z M 20.382812 14.582031 L 20.382812 22.917969 L 3.652344 22.917969 L 3.652344 6.25 L 20.382812 6.25 Z M 13.789062 27.539062 C 14.5 28.296875 14.597656 29.035156 14.132812 29.925781 C 13.308594 31.496094 10.671875 31.421875 9.902344 29.8125 C 9.539062 29.054688 9.539062 28.730469 9.902344 28.011719 C 10.691406 26.535156 12.632812 26.308594 13.789062 27.539062 Z M 13.789062 27.539062 "></path></svg>`}function D(e={}){return`<svg viewBox="0 -2.5 28 28" ${i.toHTMLProps?.(e)||""}><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM11 19.93C7.05 19.44 4 16.08 4 12C4 11.38 4.08 10.79 4.21 10.21L9 15V16C9 17.1 9.9 18 11 18V19.93ZM17.9 17.39C17.64 16.58 16.9 16 16 16H15V13C15 12.45 14.55 12 14 12H8V10H10C10.55 10 11 9.55 11 9V7H13C14.1 7 15 6.1 15 5V4.59C17.93 5.78 20 8.65 20 12C20 14.08 19.2 15.97 17.9 17.39Z"></path></svg>`}function E(e={}){return`<svg viewBox="0 0 24 24" ${i.toHTMLProps?.(e)||""}><path fill="currentColor" d="M5.79335761,5 L18.2066424,5 C19.7805584,5 21.0868816,6.21634264 21.1990185,7.78625885 L21.8575059,17.0050826 C21.9307825,18.0309548 21.1585512,18.9219909 20.132679,18.9952675 C20.088523,18.9984215 20.0442685,19 20,19 C18.8245863,19 17.8000084,18.2000338 17.5149287,17.059715 L17,15 L7,15 L6.48507125,17.059715 C6.19999155,18.2000338 5.1754137,19 4,19 C2.97151413,19 2.13776159,18.1662475 2.13776159,17.1377616 C2.13776159,17.0934931 2.1393401,17.0492386 2.1424941,17.0050826 L2.80098151,7.78625885 C2.91311838,6.21634264 4.21944161,5 5.79335761,5 Z M14.5,10 C15.3284271,10 16,9.32842712 16,8.5 C16,7.67157288 15.3284271,7 14.5,7 C13.6715729,7 13,7.67157288 13,8.5 C13,9.32842712 13.6715729,10 14.5,10 Z M18.5,13 C19.3284271,13 20,12.3284271 20,11.5 C20,10.6715729 19.3284271,10 18.5,10 C17.6715729,10 17,10.6715729 17,11.5 C17,12.3284271 17.6715729,13 18.5,13 Z M6,9 L4,9 L4,11 L6,11 L6,13 L8,13 L8,11 L10,11 L10,9 L8,9 L8,7 L6,7 L6,9 Z"></path></svg>`}const P=[l.default.findByProps("bot","nameTag").nameTag,l.default.findByProps("wrappedName","nameAndDecorators").nameAndDecorators,l.default.findByProps("wrappedName","nameAndDecorators","selected").nameAndDecorators],c={online:"#3ba55d",dnd:"#ed4245",idle:"#faa81a"},S={desktop:e=>w({style:{color:c[e]}}),mobile:e=>V({style:{color:c[e]}}),web:e=>D({style:{color:c[e]}}),embedded:e=>E({style:{color:c[e]}})};async function Z(e,o){if(v.persist.ghost.settings.ignoreBots&&e.bot)return;let t=u.default.parseHTML('<span class="pi--patched pi--icon-container pi--hidden"></span>');o.appendChild(t),t.render=()=>{const r=g.PresenceStore?.getState()?.clientStatuses?.[e?.id];if(!r){t.innerHTML="",t.classList.add("pi--hidden");return}if(_.isEqual(r,t.state)&&_.isEqual(t.state,r))return;t.classList.remove("pi--hidden"),t.state=r;const O=Object.entries(r).map(n=>{const h=u.default.parseHTML(`<div class="pi--icon">${S[n[0]](n[1])}</div>`);return h.setAttribute("acord--tooltip-content",`${n[0][0].toUpperCase()+n[0].slice(1).toLowerCase()}: ${b.default.format(`STATUS_${n[1]=="embedded"?"UNKNOWN":n[1].toUpperCase()}`)}`),h});t.replaceChildren(...O)};const a=p.default.on("PlatformIndicators:EverySecond",t.render);t.unmount=()=>{a()},t.render()}let C={};const A=(e,o)=>{Date.now()-(C[e.id]||0)>100&&(C[e.id]=Date.now(),Z(e,o))};function N(){d.add(p.default.on("domMutation",e=>{e.addedNodes.forEach(o=>{o.nodeType!==Node.TEXT_NODE&&o.querySelectorAll(P.map(t=>`.${t}`).join(", ")).forEach(async t=>{if(t.querySelector(".pi--patched"))return;const a=f.default.react.getProps(t,r=>!!r?.user)?.user;!a||A(a,t)})}),e.removedNodes.forEach(o=>{o.nodeType!==Node.TEXT_NODE&&o.querySelectorAll(".pi--patched").forEach(async t=>{t.unmount?.()})})}))}function B(){d.add(f.default.interval(()=>p.default.emit("PlatformIndicators:EverySecond"),1e3))}var x=()=>H.injectCSS(".pi--icon-container{display:inline-flex;align-items:center;gap:4px;margin-left:4px}.pi--icon-container svg{color:#f5f5f5;width:18px;height:18px}.pi--hidden{display:none}"),$={load(){N(),B(),d.add(x())},unload(){d.removeAll()},settings:{data:[{type:"checkbox",name:"Ignore Bots",description:"Doesn't show platforms of the bots. (if ur interested they generaly are web tho)",property:"ignoreBots",value:!0}]}};return $})(acord.modules.webpack,acord.dom,acord.extension,acord.utils,acord.events,acord.modules.common,acord.i18n,acord.patcher);
