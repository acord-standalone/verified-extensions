(function(i,l,r){"use strict";function s(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var c=s(l);function a(n){console.log(i.persist.ghost?.settings?.channelIds);let e=(i.persist.ghost?.settings?.channelIds||"").trim(),t=e.split(/, */).map(u=>u.trim()).filter(u=>u);e?.includes(n)?t.splice(t.indexOf(n),1):t.push(n),i.persist.store.settings.channelIds=t.join(", ")}var d={load(){const n=(e,t)=>{e?.props?.children&&t?.channel?.id&&e?.props?.children.push(c.default.contextMenus.build.item({type:"separator"}),c.default.contextMenus.build.item({label:i.i18n.format("FORCE_NOTIFICATIONS"),type:"toggle",checked:!!i.persist.ghost?.settings?.channelIds?.includes(t.channel.id),action(){a(t.channel.id),c.default.contextMenus.close()}}))};i.subscriptions.push(c.default.contextMenus.patch("user-context",n),c.default.contextMenus.patch("channel-context",n),(()=>{function e({message:t}){if(!(t?.channel_id&&i.persist.ghost?.settings?.channelIds?.includes(t?.channel_id))||t.author.id===r.UserStore.getCurrentUser().id||i.persist.ghost?.settings?.onlyWhenHidden&&document.visibilityState==="visible"||window.location.href.includes(t?.channel_id)&&document.visibilityState==="visible"&&document.hasFocus())return;let u=t.guild_id?r.GuildStore.getGuild(t.guild_id)?.name:i.i18n.format("DMS"),o=new Notification(i.i18n.format("TITLE",t.author.username,u),{body:t?.content?.trim()||i.i18n.format("NO_CONTENT"),icon:t.author.avatar?`https://cdn.discordapp.com/avatars/${t.author.id}/${t.author.avatar}.png?size=512`:`https://cdn.discordapp.com/embed/avatars/${t.author.discriminator%5}.png`,silent:!!i.persist.ghost?.settings?.silentNotifications});o.onclick=()=>{r.Router.transitionTo(`/channels/${t.guild_id||"@me"}/${t.channel_id}`)}}return r.FluxDispatcher.subscribe("MESSAGE_CREATE",e),()=>{r.FluxDispatcher.unsubscribe("MESSAGE_CREATE",e)}})())}};return d})($acord.extension,$acord.ui,$acord.modules.common);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic291cmNlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3Vic2NyaXB0aW9ucywgaTE4biwgcGVyc2lzdCB9IGZyb20gXCJAYWNvcmQvZXh0ZW5zaW9uXCI7XHJcbmltcG9ydCB1aSBmcm9tIFwiQGFjb3JkL3VpXCI7XHJcbmltcG9ydCB7IEZsdXhEaXNwYXRjaGVyLCBSb3V0ZXIsIEd1aWxkU3RvcmUsIFVzZXJTdG9yZSB9IGZyb20gXCJAYWNvcmQvbW9kdWxlcy9jb21tb25cIjtcclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUNoYW5uZWwoY2hhbm5lbElkKSB7XHJcbiAgY29uc29sZS5sb2cocGVyc2lzdC5naG9zdD8uc2V0dGluZ3M/LmNoYW5uZWxJZHMpO1xyXG4gIGxldCBjaGFubmVsSWRzU3RyaW5nID0gKHBlcnNpc3QuZ2hvc3Q/LnNldHRpbmdzPy5jaGFubmVsSWRzIHx8IFwiXCIpLnRyaW0oKTtcclxuICBsZXQgY2hhbm5lbElkcyA9IGNoYW5uZWxJZHNTdHJpbmcuc3BsaXQoLywgKi8pLm1hcChpID0+IGkudHJpbSgpKS5maWx0ZXIoaSA9PiBpKTtcclxuICBpZiAoY2hhbm5lbElkc1N0cmluZz8uaW5jbHVkZXMoY2hhbm5lbElkKSkge1xyXG4gICAgY2hhbm5lbElkcy5zcGxpY2UoY2hhbm5lbElkcy5pbmRleE9mKGNoYW5uZWxJZCksIDEpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjaGFubmVsSWRzLnB1c2goY2hhbm5lbElkKTtcclxuICB9XHJcbiAgcGVyc2lzdC5zdG9yZS5zZXR0aW5ncy5jaGFubmVsSWRzID0gY2hhbm5lbElkcy5qb2luKFwiLCBcIik7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBsb2FkKCkge1xyXG4gICAgY29uc3QgY29udGV4dE1lbnVGdW5jID0gKGVsbSwgcHJvcCkgPT4ge1xyXG4gICAgICBpZiAoZWxtPy5wcm9wcz8uY2hpbGRyZW4gJiYgcHJvcD8uY2hhbm5lbD8uaWQpIHtcclxuICAgICAgICBlbG0/LnByb3BzPy5jaGlsZHJlbi5wdXNoKFxyXG4gICAgICAgICAgdWkuY29udGV4dE1lbnVzLmJ1aWxkLml0ZW0oe1xyXG4gICAgICAgICAgICB0eXBlOiBcInNlcGFyYXRvclwiLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICB1aS5jb250ZXh0TWVudXMuYnVpbGQuaXRlbSh7XHJcbiAgICAgICAgICAgIGxhYmVsOiBpMThuLmZvcm1hdChcIkZPUkNFX05PVElGSUNBVElPTlNcIiksXHJcbiAgICAgICAgICAgIHR5cGU6IFwidG9nZ2xlXCIsXHJcbiAgICAgICAgICAgIGNoZWNrZWQ6ICEhcGVyc2lzdC5naG9zdD8uc2V0dGluZ3M/LmNoYW5uZWxJZHM/LmluY2x1ZGVzKHByb3AuY2hhbm5lbC5pZCksXHJcbiAgICAgICAgICAgIGFjdGlvbigpIHtcclxuICAgICAgICAgICAgICB0b2dnbGVDaGFubmVsKHByb3AuY2hhbm5lbC5pZCk7XHJcbiAgICAgICAgICAgICAgdWkuY29udGV4dE1lbnVzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgdWkuY29udGV4dE1lbnVzLnBhdGNoKFwidXNlci1jb250ZXh0XCIsIGNvbnRleHRNZW51RnVuYyksXHJcbiAgICAgIHVpLmNvbnRleHRNZW51cy5wYXRjaChcImNoYW5uZWwtY29udGV4dFwiLCBjb250ZXh0TWVudUZ1bmMpLFxyXG4gICAgICAoKCkgPT4ge1xyXG4gICAgICAgIGZ1bmN0aW9uIG9uTWVzc2FnZSh7IG1lc3NhZ2UgfSkge1xyXG4gICAgICAgICAgaWYgKCEobWVzc2FnZT8uY2hhbm5lbF9pZCAmJiBwZXJzaXN0Lmdob3N0Py5zZXR0aW5ncz8uY2hhbm5lbElkcz8uaW5jbHVkZXMobWVzc2FnZT8uY2hhbm5lbF9pZCkpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgaWYgKG1lc3NhZ2UuYXV0aG9yLmlkID09PSBVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKS5pZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGlmIChwZXJzaXN0Lmdob3N0Py5zZXR0aW5ncz8ub25seVdoZW5IaWRkZW4gJiYgZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHJldHVybjtcclxuICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyhtZXNzYWdlPy5jaGFubmVsX2lkKSAmJiBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJyAmJiBkb2N1bWVudC5oYXNGb2N1cygpKSByZXR1cm47XHJcblxyXG5cclxuICAgICAgICAgIGxldCBndWlsZE5hbWUgPSBtZXNzYWdlLmd1aWxkX2lkID8gR3VpbGRTdG9yZS5nZXRHdWlsZChtZXNzYWdlLmd1aWxkX2lkKT8ubmFtZSA6IGkxOG4uZm9ybWF0KFwiRE1TXCIpO1xyXG4gICAgICAgICAgbGV0IG5vdGlmID0gbmV3IE5vdGlmaWNhdGlvbihcclxuICAgICAgICAgICAgaTE4bi5mb3JtYXQoXCJUSVRMRVwiLCBtZXNzYWdlLmF1dGhvci51c2VybmFtZSwgZ3VpbGROYW1lKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJvZHk6IG1lc3NhZ2U/LmNvbnRlbnQ/LnRyaW0oKSB8fCBpMThuLmZvcm1hdChcIk5PX0NPTlRFTlRcIiksXHJcbiAgICAgICAgICAgICAgaWNvbjogbWVzc2FnZS5hdXRob3IuYXZhdGFyID8gYGh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMvJHttZXNzYWdlLmF1dGhvci5pZH0vJHttZXNzYWdlLmF1dGhvci5hdmF0YXJ9LnBuZz9zaXplPTUxMmAgOiBgaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vZW1iZWQvYXZhdGFycy8ke21lc3NhZ2UuYXV0aG9yLmRpc2NyaW1pbmF0b3IgJSA1fS5wbmdgLFxyXG4gICAgICAgICAgICAgIHNpbGVudDogISFwZXJzaXN0Lmdob3N0Py5zZXR0aW5ncz8uc2lsZW50Tm90aWZpY2F0aW9ucyxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBub3RpZi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBSb3V0ZXIudHJhbnNpdGlvblRvKGAvY2hhbm5lbHMvJHttZXNzYWdlLmd1aWxkX2lkIHx8IFwiQG1lXCJ9LyR7bWVzc2FnZS5jaGFubmVsX2lkfWApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBGbHV4RGlzcGF0Y2hlci5zdWJzY3JpYmUoXCJNRVNTQUdFX0NSRUFURVwiLCBvbk1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICBGbHV4RGlzcGF0Y2hlci51bnN1YnNjcmliZShcIk1FU1NBR0VfQ1JFQVRFXCIsIG9uTWVzc2FnZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSkoKVxyXG4gICAgKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsicGVyc2lzdCIsInVpIiwiaTE4biIsInN1YnNjcmlwdGlvbnMiLCJVc2VyU3RvcmUiLCJHdWlsZFN0b3JlIiwiUm91dGVyIiwiRmx1eERpc3BhdGNoZXIiXSwibWFwcGluZ3MiOiJrTUFHQSxTQUFTLGFBQWEsQ0FBQyxTQUFTLEVBQUU7QUFDbEMsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDQSxpQkFBTyxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDbkQsRUFBRSxJQUFJLGdCQUFnQixHQUFHLENBQUNBLGlCQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxVQUFVLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQzVFLEVBQUUsSUFBSSxVQUFVLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdB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
