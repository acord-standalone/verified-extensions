(function(i,s,r){"use strict";function a(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var c=a(s);function u(n){console.log(i.persist.ghost?.settings?.channelIds);let e=(i.persist.ghost?.settings?.channelIds||"").trim(),t=e.split(/, */).map(l=>l.trim()).filter(l=>l);e?.includes(n)?t.splice(t.indexOf(n),1):t.push(n),i.persist.store.settings.channelIds=t.join(", ")}var d={load(){const n=(e,t)=>{e?.props?.children&&t?.channel?.id&&e?.props?.children.push(c.default.contextMenus.build.item({type:"separator"}),c.default.contextMenus.build.item({label:i.i18n.format("FORCE_NOTIFICATIONS"),type:"toggle",checked:!!i.persist.ghost?.settings?.channelIds?.includes(t.channel.id),action(){u(t.channel.id),c.default.contextMenus.close()}}))};i.subscriptions.push(c.default.contextMenus.patch("user-context",n),c.default.contextMenus.patch("channel-context",n),(()=>{function e({message:t}){if(!(t?.channel_id&&i.persist.ghost?.settings?.channelIds?.includes(t?.channel_id))||i.persist.ghost?.settings?.onlyWhenHidden&&document.visibilityState==="visible"||window.location.href.includes(t?.channel_id)&&document.visibilityState==="visible"&&document.hasFocus())return;let l=t.guild_id?r.GuildStore.getGuild(t.guild_id)?.name:i.i18n.format("DMS"),o=new Notification(i.i18n.format("TITLE",t.author.username,l),{body:t?.content?.trim()||i.i18n.format("NO_CONTENT"),icon:t.author.avatar?`https://cdn.discordapp.com/avatars/${t.author.id}/${t.author.avatar}.png?size=512`:`https://cdn.discordapp.com/embed/avatars/${t.author.discriminator%5}.png`,silent:!!i.persist.ghost?.settings?.silentNotifications});o.onclick=()=>{r.Router.transitionTo(`/channels/${t.guild_id||"@me"}/${t.channel_id}`)}}return r.FluxDispatcher.subscribe("MESSAGE_CREATE",e),()=>{r.FluxDispatcher.unsubscribe("MESSAGE_CREATE",e)}})())}};return d})($acord.extension,$acord.ui,$acord.modules.common);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic291cmNlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3Vic2NyaXB0aW9ucywgaTE4biwgcGVyc2lzdCB9IGZyb20gXCJAYWNvcmQvZXh0ZW5zaW9uXCI7XHJcbmltcG9ydCB1aSBmcm9tIFwiQGFjb3JkL3VpXCI7XHJcbmltcG9ydCB7IEZsdXhEaXNwYXRjaGVyLCBSb3V0ZXIsIEd1aWxkU3RvcmUgfSBmcm9tIFwiQGFjb3JkL21vZHVsZXMvY29tbW9uXCI7XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVDaGFubmVsKGNoYW5uZWxJZCkge1xyXG4gIGNvbnNvbGUubG9nKHBlcnNpc3QuZ2hvc3Q/LnNldHRpbmdzPy5jaGFubmVsSWRzKTtcclxuICBsZXQgY2hhbm5lbElkc1N0cmluZyA9IChwZXJzaXN0Lmdob3N0Py5zZXR0aW5ncz8uY2hhbm5lbElkcyB8fCBcIlwiKS50cmltKCk7XHJcbiAgbGV0IGNoYW5uZWxJZHMgPSBjaGFubmVsSWRzU3RyaW5nLnNwbGl0KC8sICovKS5tYXAoaSA9PiBpLnRyaW0oKSkuZmlsdGVyKGkgPT4gaSk7XHJcbiAgaWYgKGNoYW5uZWxJZHNTdHJpbmc/LmluY2x1ZGVzKGNoYW5uZWxJZCkpIHtcclxuICAgIGNoYW5uZWxJZHMuc3BsaWNlKGNoYW5uZWxJZHMuaW5kZXhPZihjaGFubmVsSWQpLCAxKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY2hhbm5lbElkcy5wdXNoKGNoYW5uZWxJZCk7XHJcbiAgfVxyXG4gIHBlcnNpc3Quc3RvcmUuc2V0dGluZ3MuY2hhbm5lbElkcyA9IGNoYW5uZWxJZHMuam9pbihcIiwgXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgbG9hZCgpIHtcclxuICAgIGNvbnN0IGNvbnRleHRNZW51RnVuYyA9IChlbG0sIHByb3ApID0+IHtcclxuICAgICAgaWYgKGVsbT8ucHJvcHM/LmNoaWxkcmVuICYmIHByb3A/LmNoYW5uZWw/LmlkKSB7XHJcbiAgICAgICAgZWxtPy5wcm9wcz8uY2hpbGRyZW4ucHVzaChcclxuICAgICAgICAgIHVpLmNvbnRleHRNZW51cy5idWlsZC5pdGVtKHtcclxuICAgICAgICAgICAgdHlwZTogXCJzZXBhcmF0b3JcIixcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgdWkuY29udGV4dE1lbnVzLmJ1aWxkLml0ZW0oe1xyXG4gICAgICAgICAgICBsYWJlbDogaTE4bi5mb3JtYXQoXCJGT1JDRV9OT1RJRklDQVRJT05TXCIpLFxyXG4gICAgICAgICAgICB0eXBlOiBcInRvZ2dsZVwiLFxyXG4gICAgICAgICAgICBjaGVja2VkOiAhIXBlcnNpc3QuZ2hvc3Q/LnNldHRpbmdzPy5jaGFubmVsSWRzPy5pbmNsdWRlcyhwcm9wLmNoYW5uZWwuaWQpLFxyXG4gICAgICAgICAgICBhY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdG9nZ2xlQ2hhbm5lbChwcm9wLmNoYW5uZWwuaWQpO1xyXG4gICAgICAgICAgICAgIHVpLmNvbnRleHRNZW51cy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpcHRpb25zLnB1c2goXHJcbiAgICAgIHVpLmNvbnRleHRNZW51cy5wYXRjaChcInVzZXItY29udGV4dFwiLCBjb250ZXh0TWVudUZ1bmMpLFxyXG4gICAgICB1aS5jb250ZXh0TWVudXMucGF0Y2goXCJjaGFubmVsLWNvbnRleHRcIiwgY29udGV4dE1lbnVGdW5jKSxcclxuICAgICAgKCgpID0+IHtcclxuICAgICAgICBmdW5jdGlvbiBvbk1lc3NhZ2UoeyBtZXNzYWdlIH0pIHtcclxuICAgICAgICAgIGlmICghKG1lc3NhZ2U/LmNoYW5uZWxfaWQgJiYgcGVyc2lzdC5naG9zdD8uc2V0dGluZ3M/LmNoYW5uZWxJZHM/LmluY2x1ZGVzKG1lc3NhZ2U/LmNoYW5uZWxfaWQpKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGlmIChwZXJzaXN0Lmdob3N0Py5zZXR0aW5ncz8ub25seVdoZW5IaWRkZW4gJiYgZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHJldHVybjtcclxuICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyhtZXNzYWdlPy5jaGFubmVsX2lkKSAmJiBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJyAmJiBkb2N1bWVudC5oYXNGb2N1cygpKSByZXR1cm47XHJcblxyXG5cclxuICAgICAgICAgIGxldCBndWlsZE5hbWUgPSBtZXNzYWdlLmd1aWxkX2lkID8gR3VpbGRTdG9yZS5nZXRHdWlsZChtZXNzYWdlLmd1aWxkX2lkKT8ubmFtZSA6IGkxOG4uZm9ybWF0KFwiRE1TXCIpO1xyXG4gICAgICAgICAgbGV0IG5vdGlmID0gbmV3IE5vdGlmaWNhdGlvbihcclxuICAgICAgICAgICAgaTE4bi5mb3JtYXQoXCJUSVRMRVwiLCBtZXNzYWdlLmF1dGhvci51c2VybmFtZSwgZ3VpbGROYW1lKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJvZHk6IG1lc3NhZ2U/LmNvbnRlbnQ/LnRyaW0oKSB8fCBpMThuLmZvcm1hdChcIk5PX0NPTlRFTlRcIiksXHJcbiAgICAgICAgICAgICAgaWNvbjogbWVzc2FnZS5hdXRob3IuYXZhdGFyID8gYGh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMvJHttZXNzYWdlLmF1dGhvci5pZH0vJHttZXNzYWdlLmF1dGhvci5hdmF0YXJ9LnBuZz9zaXplPTUxMmAgOiBgaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vZW1iZWQvYXZhdGFycy8ke21lc3NhZ2UuYXV0aG9yLmRpc2NyaW1pbmF0b3IgJSA1fS5wbmdgLFxyXG4gICAgICAgICAgICAgIHNpbGVudDogISFwZXJzaXN0Lmdob3N0Py5zZXR0aW5ncz8uc2lsZW50Tm90aWZpY2F0aW9ucyxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBub3RpZi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBSb3V0ZXIudHJhbnNpdGlvblRvKGAvY2hhbm5lbHMvJHttZXNzYWdlLmd1aWxkX2lkIHx8IFwiQG1lXCJ9LyR7bWVzc2FnZS5jaGFubmVsX2lkfWApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBGbHV4RGlzcGF0Y2hlci5zdWJzY3JpYmUoXCJNRVNTQUdFX0NSRUFURVwiLCBvbk1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICBGbHV4RGlzcGF0Y2hlci51bnN1YnNjcmliZShcIk1FU1NBR0VfQ1JFQVRFXCIsIG9uTWVzc2FnZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSkoKVxyXG4gICAgKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsicGVyc2lzdCIsInVpIiwiaTE4biIsInN1YnNjcmlwdGlvbnMiLCJHdWlsZFN0b3JlIiwiUm91dGVyIiwiRmx1eERpc3BhdGNoZXIiXSwibWFwcGluZ3MiOiJrTUFHQSxTQUFTLGFBQWEsQ0FBQyxTQUFTLEVBQUU7QUFDbEMsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDQSxpQkFBTyxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDbkQsRUFBRSxJQUFJLGdCQUFnQixHQUFHLENBQUNBLGlCQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxVQUFVLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQzVFLEVBQUUsSUFBSSxVQUFVLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDdkYsRUFBRSxJ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
