(function(n,m,f){"use strict";function p(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var r=p(f);let s=0,o=null,i=[];async function u(){let t=o,e=i[s];if(!e){if(await r.default.sleep(1e3),o!==t)return;u();return}n.UserSettingsProtoActions.updateAsync("status",a=>{a.customStatus={expiresAtMs:"0",text:e.state,emojiName:e.emoji,emojiId:"0"}},0),s=(s+1)%i.length,await r.default.sleep(e.timeout*1e3),o===t&&u()}function l(){o=Math.random().toString(36).slice(2),s=0,u()}function c(){let t=(m.persist.ghost?.settings?.statuses||"").trim();if(!t){i=[];return}i=t.split(`
`).map(e=>{let[a,d,x]=e.split("|");return{state:a.trim(),timeout:Math.max(isNaN(d.trim())?1:parseFloat(d.trim()),1),emoji:x?.trim()}})}const g=_.debounce(()=>{c(),l()},2500);var j={load(){c(),l()},unload(){i=[],o=null,s=0,n.UserSettingsProtoActions.updateAsync("status",t=>{t.customStatus=void 0},0)},config(){g()}};return j})($acord.modules.common,$acord.extension,$acord.utils);
