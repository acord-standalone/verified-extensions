(function(g,n,i,x,v,y,w){"use strict";function p(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var c=p(g),T=p(x),f=p(v),l=p(y),C=()=>w.injectCSS(".tabs--container{box-sizing:border-box;display:flex;flex-direction:column;width:100vw;-webkit-app-region:drag}.tabs--container ::-webkit-scrollbar{width:0px;height:0px}.tabs--container.hidden{display:none}.tabs--container>.tab-items,.tabs--container>.bookmarks{box-sizing:border-box;display:flex;align-items:center;width:100vw;max-width:100vw;--item-h: 30px;height:var(--item-h);min-height:var(--item-h);gap:4px;padding:8px 4px 0;transition:.1s ease-in-out opacity;-webkit-app-region:drag;overflow-x:auto;overflow-y:hidden}.tabs--container>.bookmarks{height:var(--item-h);min-height:var(--item-h);background-color:#0000001a;-webkit-app-region:no-drag;padding-top:4px;padding-bottom:4px}.tabs--container>.bookmarks.hidden{display:none}.tabs--container .new-tab{color:#fff;width:12px;height:12px;min-width:12px;min-height:12px;transform:rotate(45deg);cursor:pointer;margin:0 4px;-webkit-app-region:no-drag}.tabs--container .bookmark-item{box-sizing:border-box;-webkit-app-region:no-drag;background-color:#00000040;border-radius:4px;display:flex;align-items:center;justify-content:center;padding:6px;cursor:pointer;opacity:.5;transition:.1s ease-in-out opacity;position:relative}.tabs--container .bookmark-item:hover,.tabs--container .bookmark-item.selected,.tabs--container .bookmark-item:focus-within{opacity:1}.tabs--container .bookmark-item .rename-input{border:none;background-color:transparent;color:#f5f5f5;border-bottom:1px solid whitesmoke;font-size:12px}.tabs--container .bookmark-item .unread{position:absolute;right:-3px;top:-3px;border-radius:50%;background-color:#ed4245;width:12px;height:12px;font-size:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:400}.tabs--container .bookmark-item .unread.plus{font-size:8px}.tabs--container .bookmark-item .unread.hidden{display:none}.tabs--container .bookmark-item .info{display:flex;align-items:center;justify-content:flex-start;gap:4px}.tabs--container .bookmark-item .icon{border-radius:2px;width:8px;height:8px;background-size:cover;background-position:center;background-repeat:no-repeat}.tabs--container .bookmark-item .title{font-size:12px;color:#fff;text-overflow:ellipsis;word-break:keep-all;overflow:hidden;white-space:nowrap;max-width:150px}.tabs--container .tab-item{-webkit-app-region:no-drag;color:#fff;background-color:#00000040;box-sizing:border-box;width:fit-content;height:var(--item-h);display:flex;align-items:center;justify-content:space-between;padding:0 8px;gap:8px;border-top-left-radius:8px;border-top-right-radius:8px;cursor:pointer;opacity:.5;position:relative}.tabs--container .tab-item .unread{position:absolute;right:-4px;top:-4px;border-radius:50%;background-color:#ed4245;width:14px;height:14px;font-size:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:400}.tabs--container .tab-item .unread.plus{font-size:8px}.tabs--container .tab-item .unread.hidden{display:none}.tabs--container .tab-item .info{display:flex;align-items:center;justify-content:flex-start;flex:2;gap:8px}.tabs--container .tab-item .icon{border-radius:4px;width:14px;height:14px;background-size:cover;background-position:center;background-repeat:no-repeat}.tabs--container .tab-item .title{font-size:14px;text-overflow:ellipsis;word-break:keep-all;overflow:hidden;white-space:nowrap;min-width:150px;max-width:250px;flex:1}.tabs--container .tab-item .close{color:#ffffff80;width:12px;height:12px;cursor:pointer;transition:.1s ease-in-out opacity;border-radius:50%;padding:4px;display:flex;align-items:center;justify-content:center}.tabs--container .tab-item .close:hover{background-color:#ffffff1a}.tabs--container .tab-item .close.hidden{opacity:0;pointer-events:none}.tabs--container .tab-item.disabled{opacity:.5;pointer-events:none}.tabs--container .tab-item:hover,.tabs--container .tab-item.selected{opacity:1}[class*=bg-]{top:0!important}");let m=!1;const S=/translateY\(([^)]+)\)/;var E={async load(){if(await c.default.vue.ready.when(),m)return;n.subscriptions.push(C());const o=T.default.parse(`
      <div class="tabs--container">
          <div class="tab-items" @wheel="onVerticalScrollWheel">
            <div v-for="tab in tabs" class="tab-item" :class="{'selected': selectedTabId === tab.id}" :key="tab.id" @click="onTabClick(tab, $event)" @contextmenu="onTabContextMenu(tab, $event)">
              <span class="info">
                  <span class="icon" :style="tab.icon ? \`background-image: url('\${tab.icon}');\` : \`background-color: #5865f2;\`"></span>
                  <span class="title">{{tab.pathname === "/store" ? "Acord" : tab.title}}</span>
              </span>
              <span class="close" :class="{'hidden': tabs.length <= 1}" @click="onTabCloseClick(tab)">
                <svg class="close-icon" viewBox="0 0 12 12">
                  <polygon fill="currentColor" fill-rule="evenodd" points="11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"></polygon>
                </svg>
              </span>
              <span class="unread" :class="{'hidden': !tab.unread}">{{tab.unread}}</span>
            </div>
            <div class="new-tab" @click="onNewTabClick">
              <svg viewBox="0 0 12 12">
                <polygon fill="currentColor" fill-rule="evenodd" points="11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"></polygon>
              </svg>
            </div>
          </div>
          <div v-if="bookmarks.length"  class="bookmarks" @wheel="onVerticalScrollWheel">
            <div v-for="bookmark in bookmarks" :key="bookmark.id" class="bookmark-item" :class="{'selected': selectedTab?.pathname === bookmark.pathname}" @click="onBookmarkClick(bookmark, $event)" @contextmenu="onBookmarkContextMenu(bookmark, $event)">
              <span class="info">
                  <span class="icon" :style="bookmark.icon ? \`background-image: url('\${bookmark.icon}');\` : \`background-color: #5865f2;\`"></span>
                  <span v-if="!bookmark.inRenameMode" class="title">{{bookmark.pathname === "/store" ? "Acord" : bookmark.title}}</span>
                  <input v-else v-focus type="text" class="rename-input" :value="bookmark.title" @blur="onBookmarkRenameBlur(bookmark, $event)" @keyup="onBookmarkRenameKeyUp(bookmark, $event)">
              </span>
              <span class="unread" :class="{'hidden': !bookmark.unread}">{{bookmark.unread}}</span>
            </div>
          </div>
      </div>
    `),b=Vue.createApp({data(){return{tabs:[],bookmarks:[],selectedTabId:null,ignoreSelectOnce:!1}},mounted(){this.tabs=n.persist.ghost?.[i.UserStore.getCurrentUser().id]?.tabs||[],this.bookmarks=n.persist.ghost?.[i.UserStore.getCurrentUser().id]?.bookmarks||[],this.tabs.length||this.addTab(),this.selectedTabId=n.persist.ghost?.[i.UserStore.getCurrentUser().id]?.selectedTabId??this.tabs[0].id,this.ignoreSelectOnce=this.selectedTab.pathname!==window.location.pathname,i.Router.transitionTo(this.selectedTab.pathname),i.FluxDispatcher.subscribe("CHANNEL_SELECT",this.onChannelSelect),i.ReadStateStore.addChangeListener(this.onUnreadChange),l.default.on("DocumentTitleChange",this.onDocumentTitleChange)},unmounted(){i.FluxDispatcher.unsubscribe("CHANNEL_SELECT",this.onChannelSelect),i.ReadStateStore.removeChangeListener(this.onUnreadChange),l.default.off("DocumentTitleChange",this.onDocumentTitleChange)},computed:{selectedTab(){return this.tabs.find(e=>e.id===this.selectedTabId)}},methods:{i18nFormat:n.i18n.format,save(){n.persist.store[i.UserStore.getCurrentUser().id]={tabs:this.tabs,bookmarks:this.bookmarks,selectedTabId:this.selectedTabId}},onTabContextMenu(e,a){const t=this;let s=t.tabs.indexOf(e),d=t.tabs.filter((r,u)=>u>s);c.default.contextMenus.open(a,c.default.contextMenus.build.menu([{type:"text",label:n.i18n.format("CLOSE"),disabled:this.tabs.length<=1,action(){t.onTabCloseClick(e)}},{type:"text",label:n.i18n.format("CLOSE_TABS_TO_RIGHT"),disabled:!d.length,action(){t.tabs.filter((r,u)=>u!=s).forEach(r=>t.onTabCloseClick(r))}},{type:"separator"},{type:"text",label:n.i18n.format("MOVE_TAB_TO_LEFT"),disabled:!s,action(){let[r]=t.tabs.splice(s,1);t.tabs.splice(s-1,0,r),t.save()}},{type:"text",label:n.i18n.format("MOVE_TAB_TO_RIGHT"),disabled:s===t.tabs.length-1,action(){let[r]=t.tabs.splice(s,1);t.tabs.splice(s+1,0,r),t.save()}},{type:"separator"},{type:"text",label:n.i18n.format("ADD_TO_BOOKMARKS"),disabled:!!t.bookmarks.find(r=>r.pathname===e.pathname),action(){t.addBookmark(e)}}]))},async onChannelSelect(){if(this.ignoreSelectOnce){this.ignoreSelectOnce=!1;return}!this.selectedTab||(this.selectedTab.pathname=window.location.pathname,this.selectedTab.icon=this.getIcon(this.selectedTab.pathname),this.save())},onDocumentTitleChange(e){!this.selectedTab||(this.selectedTab.title=e,this.save())},onUnreadChange(){this.tabs.forEach(e=>{let a=e.pathname.split("/");a[1]==="channels"&&a[3]&&(e.unread=i.ReadStateStore.getUnreadCount(a[3])??0)})},onVerticalScrollWheel(e){e.target.scrollBy({left:e.deltaY,behavior:"smooth"})},onNewTabClick(){this.addTab()},onTabClick(e,a){a.target.classList.contains("close")||a.target.classList.contains("close-icon")||(this.selectedTabId=e.id,this.ignoreSelectOnce=!0,i.Router.transitionTo(e.pathname))},onTabCloseClick(e){let a=this.tabs.indexOf(e);if(a!==-1){if(this.selectedTabId===e.id){let t=this.tabs[a+1]||this.tabs[a-1];t&&(this.selectedTabId=t.id,this.ignoreSelectOnce=!0,i.Router.transitionTo(t.pathname))}this.tabs.splice(a,1),this.save()}},addTab(e={}){e.id??=Math.random().toString(36).slice(2),e.title??=document.title,e.pathname??=window.location.pathname,e.icon??=this.getIcon(e.pathname),this.tabs.push(e),this.selectedTabId=e.id,this.save()},addBookmark(e){this.bookmarks.push({...e}),this.save()},onBookmarkRenameBlur(e,a){e.inRenameMode=!1,e.title=a.target.value,this.save()},onBookmarkRenameKeyUp(e,a){a.key==="Enter"&&(e.inRenameMode=!1,e.title=a.target.value,this.save())},onBookmarkClick(e){let a=this.tabs.find(t=>t.pathname===e.pathname);a?(this.selectedTabId=a.id,this.ignoreSelectOnce=!0,i.Router.transitionTo(e.pathname)):(this.addTab({pathname:e.pathname,title:e.title}),this.ignoreSelectOnce=!0,i.Router.transitionTo(e.pathname))},onBookmarkContextMenu(e,a){const t=this;c.default.contextMenus.open(a,c.default.contextMenus.build.menu([{type:"text",label:n.i18n.format("DELETE"),action(){t.onBookmarkDelete(e)}},{type:"text",label:n.i18n.format("RENAME"),action(){e.inRenameMode=!0}}]))},onBookmarkDelete(e){let a=this.bookmarks.indexOf(e);a!==-1&&(this.bookmarks.splice(a,1),this.save())},getIcon(e){let a=e.split("/");if(a[1]==="channels")if(a[2]==="@me"){let t=i.ChannelStore.getChannel(a[3]);if(t){if(t.isGroupDM()&&t.icon)return`https://cdn.discordapp.com/channel-icons/${t.id}/${t.icon}.webp?size=32`;if(t.isDM()){let s=t.getRecipientId(),d=i.UserStore.getUser(s);return d?.avatar?`https://cdn.discordapp.com/avatars/${s}/${d.avatar}.webp?size=32`:`https://cdn.discordapp.com/embed/avatars/${d.discriminator%5}.png`}}}else{let t=i.GuildStore.getGuild(a[2]);if(t?.icon)return`https://cdn.discordapp.com/icons/${t.id}/${t.icon}.webp?size=32`}return null}}});b.directive("focus",{mounted(e){setTimeout(()=>e.focus(),1)}}),b.mount(o),n.subscriptions.push(()=>{b.unmount(),o.remove()}),document.querySelector('[class*="titleBar-"]').insertAdjacentElement("afterend",o);function k(){document.querySelector(".tabs--container")&&o.parentElement.removeChild(o)}function h(){k(),document.querySelector('[class*="titleBar-"]').insertAdjacentElement("afterend",o)}n.subscriptions.push(l.default.on("MainWindowFullScreenExit",h),l.default.on("MainWindowFullScreenEnter",k),l.default.on("CurrentUserChange",h),l.default.on("LocaleChange",h)),n.subscriptions.push(f.default.interval(()=>{const e=document.querySelector('[class*="pictureInPictureWindow-"]');if(e&&e?.children?.[0]?.getAttribute?.("style")&&!i.WindowStore.isElementFullScreen()){let a=f.default.react.getProps(e,t=>t?.style)?.style;if(a){let t=a.transform.find(s=>s.translateY).translateY;typeof t=="object"&&(t=t._parent._value),e.setAttribute("style",e.getAttribute("style").replace(S,`translateY(${t-o.getBoundingClientRect().height}px)`))}}},1e3))},unload(){m=!0}};return E})($acord.ui,$acord.extension,$acord.modules.common,$acord.dom,$acord.utils,$acord.events,$acord.patcher);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic291cmNlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVpIGZyb20gXCJAYWNvcmQvdWlcIjtcclxuaW1wb3J0IHsgc3Vic2NyaXB0aW9ucywgcGVyc2lzdCwgaTE4biB9IGZyb20gXCJAYWNvcmQvZXh0ZW5zaW9uXCI7XHJcbmltcG9ydCB7IEZsdXhEaXNwYXRjaGVyLCBXaW5kb3dTdG9yZSwgQ2hhbm5lbFN0b3JlLCBVc2VyU3RvcmUsIEd1aWxkU3RvcmUsIFJvdXRlciwgUmVhZFN0YXRlU3RvcmUgfSBmcm9tIFwiQGFjb3JkL21vZHVsZXMvY29tbW9uXCI7XHJcbmltcG9ydCBkb20gZnJvbSBcIkBhY29yZC9kb21cIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJAYWNvcmQvdXRpbHNcIjtcclxuaW1wb3J0IGV2ZW50cyBmcm9tIFwiQGFjb3JkL2V2ZW50c1wiO1xyXG5cclxuaW1wb3J0IGluamVjdFNDU1MgZnJvbSBcIi4vc3R5bGVzLnNjc3NcIjtcclxuXHJcbmxldCB1bmxvYWRlZCA9IGZhbHNlO1xyXG5cclxuY29uc3QgdHJhbnNsYXRlWVJlZ2V4ID0gL3RyYW5zbGF0ZVlcXCgoW14pXSspXFwpLztcclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGFzeW5jIGxvYWQoKSB7XHJcbiAgICBhd2FpdCB1aS52dWUucmVhZHkud2hlbigpO1xyXG4gICAgaWYgKHVubG9hZGVkKSByZXR1cm47XHJcblxyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGluamVjdFNDU1MoKSk7XHJcbiAgICAvKiogQHR5cGUge0VsZW1lbnR9ICovXHJcbiAgICBjb25zdCB0YWJzQ29udGFpbmVyID0gZG9tLnBhcnNlKGBcclxuICAgICAgPGRpdiBjbGFzcz1cInRhYnMtLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1pdGVtc1wiIEB3aGVlbD1cIm9uVmVydGljYWxTY3JvbGxXaGVlbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IHYtZm9yPVwidGFiIGluIHRhYnNcIiBjbGFzcz1cInRhYi1pdGVtXCIgOmNsYXNzPVwieydzZWxlY3RlZCc6IHNlbGVjdGVkVGFiSWQgPT09IHRhYi5pZH1cIiA6a2V5PVwidGFiLmlkXCIgQGNsaWNrPVwib25UYWJDbGljayh0YWIsICRldmVudClcIiBAY29udGV4dG1lbnU9XCJvblRhYkNvbnRleHRNZW51KHRhYiwgJGV2ZW50KVwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mb1wiPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIiA6c3R5bGU9XCJ0YWIuaWNvbiA/IFxcYGJhY2tncm91bmQtaW1hZ2U6IHVybCgnXFwke3RhYi5pY29ufScpO1xcYCA6IFxcYGJhY2tncm91bmQtY29sb3I6ICM1ODY1ZjI7XFxgXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRpdGxlXCI+e3t0YWIucGF0aG5hbWUgPT09IFwiL3N0b3JlXCIgPyBcIkFjb3JkXCIgOiB0YWIudGl0bGV9fTwvc3Bhbj5cclxuICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjbG9zZVwiIDpjbGFzcz1cInsnaGlkZGVuJzogdGFicy5sZW5ndGggPD0gMX1cIiBAY2xpY2s9XCJvblRhYkNsb3NlQ2xpY2sodGFiKVwiPlxyXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cImNsb3NlLWljb25cIiB2aWV3Qm94PVwiMCAwIDEyIDEyXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIgcG9pbnRzPVwiMTEgMS41NzYgNi41ODMgNiAxMSAxMC40MjQgMTAuNDI0IDExIDYgNi41ODMgMS41NzYgMTEgMSAxMC40MjQgNS40MTcgNiAxIDEuNTc2IDEuNTc2IDEgNiA1LjQxNyAxMC40MjQgMVwiPjwvcG9seWdvbj5cclxuICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInVucmVhZFwiIDpjbGFzcz1cInsnaGlkZGVuJzogIXRhYi51bnJlYWR9XCI+e3t0YWIudW5yZWFkfX08L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmV3LXRhYlwiIEBjbGljaz1cIm9uTmV3VGFiQ2xpY2tcIj5cclxuICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMTIgMTJcIj5cclxuICAgICAgICAgICAgICAgIDxwb2x5Z29uIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIgcG9pbnRzPVwiMTEgMS41NzYgNi41ODMgNiAxMSAxMC40MjQgMTAuNDI0IDExIDYgNi41ODMgMS41NzYgMTEgMSAxMC40MjQgNS40MTcgNiAxIDEuNTc2IDEuNTc2IDEgNiA1LjQxNyAxMC40MjQgMVwiPjwvcG9seWdvbj5cclxuICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgdi1pZj1cImJvb2ttYXJrcy5sZW5ndGhcIiAgY2xhc3M9XCJib29rbWFya3NcIiBAd2hlZWw9XCJvblZlcnRpY2FsU2Nyb2xsV2hlZWxcIj5cclxuICAgICAgICAgICAgPGRpdiB2LWZvcj1cImJvb2ttYXJrIGluIGJvb2ttYXJrc1wiIDprZXk9XCJib29rbWFyay5pZFwiIGNsYXNzPVwiYm9va21hcmstaXRlbVwiIDpjbGFzcz1cInsnc2VsZWN0ZWQnOiBzZWxlY3RlZFRhYj8ucGF0aG5hbWUgPT09IGJvb2ttYXJrLnBhdGhuYW1lfVwiIEBjbGljaz1cIm9uQm9va21hcmtDbGljayhib29rbWFyaywgJGV2ZW50KVwiIEBjb250ZXh0bWVudT1cIm9uQm9va21hcmtDb250ZXh0TWVudShib29rbWFyaywgJGV2ZW50KVwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mb1wiPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIiA6c3R5bGU9XCJib29rbWFyay5pY29uID8gXFxgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcXCR7Ym9va21hcmsuaWNvbn0nKTtcXGAgOiBcXGBiYWNrZ3JvdW5kLWNvbG9yOiAjNTg2NWYyO1xcYFwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gdi1pZj1cIiFib29rbWFyay5pblJlbmFtZU1vZGVcIiBjbGFzcz1cInRpdGxlXCI+e3tib29rbWFyay5wYXRobmFtZSA9PT0gXCIvc3RvcmVcIiA/IFwiQWNvcmRcIiA6IGJvb2ttYXJrLnRpdGxlfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dCB2LWVsc2Ugdi1mb2N1cyB0eXBlPVwidGV4dFwiIGNsYXNzPVwicmVuYW1lLWlucHV0XCIgOnZhbHVlPVwiYm9va21hcmsudGl0bGVcIiBAYmx1cj1cIm9uQm9va21hcmtSZW5hbWVCbHVyKGJvb2ttYXJrLCAkZXZlbnQpXCIgQGtleXVwPVwib25Cb29rbWFya1JlbmFtZUtleVVwKGJvb2ttYXJrLCAkZXZlbnQpXCI+XHJcbiAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidW5yZWFkXCIgOmNsYXNzPVwieydoaWRkZW4nOiAhYm9va21hcmsudW5yZWFkfVwiPnt7Ym9va21hcmsudW5yZWFkfX08L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYCk7XHJcblxyXG4gICAgY29uc3QgYXBwID0gVnVlLmNyZWF0ZUFwcCh7XHJcbiAgICAgIGRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHRhYnM6IFtdLFxyXG4gICAgICAgICAgYm9va21hcmtzOiBbXSxcclxuICAgICAgICAgIHNlbGVjdGVkVGFiSWQ6IG51bGwsXHJcbiAgICAgICAgICBpZ25vcmVTZWxlY3RPbmNlOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgbW91bnRlZCgpIHtcclxuICAgICAgICB0aGlzLnRhYnMgPSBwZXJzaXN0Lmdob3N0Py5bVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCkuaWRdPy50YWJzIHx8IFtdO1xyXG4gICAgICAgIHRoaXMuYm9va21hcmtzID0gcGVyc2lzdC5naG9zdD8uW1VzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpLmlkXT8uYm9va21hcmtzIHx8IFtdO1xyXG4gICAgICAgIGlmICghdGhpcy50YWJzLmxlbmd0aCkgdGhpcy5hZGRUYWIoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkVGFiSWQgPSBwZXJzaXN0Lmdob3N0Py5bVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCkuaWRdPy5zZWxlY3RlZFRhYklkID8/IHRoaXMudGFic1swXS5pZDtcclxuICAgICAgICB0aGlzLmlnbm9yZVNlbGVjdE9uY2UgPSB0aGlzLnNlbGVjdGVkVGFiLnBhdGhuYW1lICE9PSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgUm91dGVyLnRyYW5zaXRpb25Ubyh0aGlzLnNlbGVjdGVkVGFiLnBhdGhuYW1lKTtcclxuXHJcbiAgICAgICAgRmx1eERpc3BhdGNoZXIuc3Vic2NyaWJlKFwiQ0hBTk5FTF9TRUxFQ1RcIiwgdGhpcy5vbkNoYW5uZWxTZWxlY3QpO1xyXG4gICAgICAgIFJlYWRTdGF0ZVN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25VbnJlYWRDaGFuZ2UpO1xyXG4gICAgICAgIGV2ZW50cy5vbihcIkRvY3VtZW50VGl0bGVDaGFuZ2VcIiwgdGhpcy5vbkRvY3VtZW50VGl0bGVDaGFuZ2UpO1xyXG4gICAgICB9LFxyXG4gICAgICB1bm1vdW50ZWQoKSB7XHJcbiAgICAgICAgRmx1eERpc3BhdGNoZXIudW5zdWJzY3JpYmUoXCJDSEFOTkVMX1NFTEVDVFwiLCB0aGlzLm9uQ2hhbm5lbFNlbGVjdCk7XHJcbiAgICAgICAgUmVhZFN0YXRlU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vblVucmVhZENoYW5nZSk7XHJcbiAgICAgICAgZXZlbnRzLm9mZihcIkRvY3VtZW50VGl0bGVDaGFuZ2VcIiwgdGhpcy5vbkRvY3VtZW50VGl0bGVDaGFuZ2UpO1xyXG4gICAgICB9LFxyXG4gICAgICBjb21wdXRlZDoge1xyXG4gICAgICAgIHNlbGVjdGVkVGFiKCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMudGFicy5maW5kKGkgPT4gaS5pZCA9PT0gdGhpcy5zZWxlY3RlZFRhYklkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBpMThuRm9ybWF0OiBpMThuLmZvcm1hdCxcclxuICAgICAgICBzYXZlKCkge1xyXG4gICAgICAgICAgcGVyc2lzdC5zdG9yZVtVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKS5pZF0gPSB7XHJcbiAgICAgICAgICAgIHRhYnM6IHRoaXMudGFicyxcclxuICAgICAgICAgICAgYm9va21hcmtzOiB0aGlzLmJvb2ttYXJrcyxcclxuICAgICAgICAgICAgc2VsZWN0ZWRUYWJJZDogdGhpcy5zZWxlY3RlZFRhYklkXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25UYWJDb250ZXh0TWVudSh0YWIsIGUpIHtcclxuICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgbGV0IG15SW5kZXggPSBzZWxmLnRhYnMuaW5kZXhPZih0YWIpO1xyXG4gICAgICAgICAgbGV0IHRhYnNBZnRlck1lID0gc2VsZi50YWJzLmZpbHRlcigoXywgaWR4KSA9PiBpZHggPiBteUluZGV4KTtcclxuICAgICAgICAgIHVpLmNvbnRleHRNZW51cy5vcGVuKGUsIHVpLmNvbnRleHRNZW51cy5idWlsZC5tZW51KFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBpMThuLmZvcm1hdChcIkNMT1NFXCIpLFxyXG4gICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnRhYnMubGVuZ3RoIDw9IDEsXHJcbiAgICAgICAgICAgICAgYWN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vblRhYkNsb3NlQ2xpY2sodGFiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICBsYWJlbDogaTE4bi5mb3JtYXQoXCJDTE9TRV9UQUJTX1RPX1JJR0hUXCIpLFxyXG4gICAgICAgICAgICAgIGRpc2FibGVkOiAhdGFic0FmdGVyTWUubGVuZ3RoLFxyXG4gICAgICAgICAgICAgIGFjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYudGFicy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICE9IG15SW5kZXgpLmZvckVhY2goaSA9PiBzZWxmLm9uVGFiQ2xvc2VDbGljayhpKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdHlwZTogXCJzZXBhcmF0b3JcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgbGFiZWw6IGkxOG4uZm9ybWF0KFwiTU9WRV9UQUJfVE9fTEVGVFwiKSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogIW15SW5kZXgsXHJcbiAgICAgICAgICAgICAgYWN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IFtpdGVtXSA9IHNlbGYudGFicy5zcGxpY2UobXlJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRhYnMuc3BsaWNlKG15SW5kZXggLSAxLCAwLCBpdGVtKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2F2ZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBpMThuLmZvcm1hdChcIk1PVkVfVEFCX1RPX1JJR0hUXCIpLFxyXG4gICAgICAgICAgICAgIGRpc2FibGVkOiBteUluZGV4ID09PSAoc2VsZi50YWJzLmxlbmd0aCAtIDEpLFxyXG4gICAgICAgICAgICAgIGFjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGxldCBbaXRlbV0gPSBzZWxmLnRhYnMuc3BsaWNlKG15SW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50YWJzLnNwbGljZShteUluZGV4ICsgMSwgMCwgaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNhdmUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInNlcGFyYXRvclwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICBsYWJlbDogaTE4bi5mb3JtYXQoXCJBRERfVE9fQk9PS01BUktTXCIpLFxyXG4gICAgICAgICAgICAgIGRpc2FibGVkOiAhIXNlbGYuYm9va21hcmtzLmZpbmQoaSA9PiBpLnBhdGhuYW1lID09PSB0YWIucGF0aG5hbWUpLFxyXG4gICAgICAgICAgICAgIGFjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuYWRkQm9va21hcmsodGFiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdKSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFzeW5jIG9uQ2hhbm5lbFNlbGVjdCgpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmlnbm9yZVNlbGVjdE9uY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5pZ25vcmVTZWxlY3RPbmNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZFRhYikgcmV0dXJuO1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhYi5wYXRobmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWIuaWNvbiA9IHRoaXMuZ2V0SWNvbih0aGlzLnNlbGVjdGVkVGFiLnBhdGhuYW1lKTtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25Eb2N1bWVudFRpdGxlQ2hhbmdlKHRpdGxlKSB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRUYWIpIHJldHVybjtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWIudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25VbnJlYWRDaGFuZ2UoKSB7XHJcbiAgICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaCgodGFiKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwYXRobmFtZVNwbGl0dGVkID0gdGFiLnBhdGhuYW1lLnNwbGl0KFwiL1wiKTtcclxuICAgICAgICAgICAgaWYgKHBhdGhuYW1lU3BsaXR0ZWRbMV0gPT09IFwiY2hhbm5lbHNcIiAmJiBwYXRobmFtZVNwbGl0dGVkWzNdKSB7XHJcbiAgICAgICAgICAgICAgdGFiLnVucmVhZCA9IFJlYWRTdGF0ZVN0b3JlLmdldFVucmVhZENvdW50KHBhdGhuYW1lU3BsaXR0ZWRbM10pID8/IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25WZXJ0aWNhbFNjcm9sbFdoZWVsKGUpIHtcclxuICAgICAgICAgIGUudGFyZ2V0LnNjcm9sbEJ5KHtcclxuICAgICAgICAgICAgbGVmdDogZS5kZWx0YVksXHJcbiAgICAgICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uTmV3VGFiQ2xpY2soKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZFRhYigpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25UYWJDbGljayh0YWIsIGUpIHtcclxuICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZVwiKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZS1pY29uXCIpKSByZXR1cm47XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFiSWQgPSB0YWIuaWQ7XHJcbiAgICAgICAgICB0aGlzLmlnbm9yZVNlbGVjdE9uY2UgPSB0cnVlO1xyXG4gICAgICAgICAgUm91dGVyLnRyYW5zaXRpb25Ubyh0YWIucGF0aG5hbWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25UYWJDbG9zZUNsaWNrKHRhYikge1xyXG4gICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy50YWJzLmluZGV4T2YodGFiKTtcclxuICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybjtcclxuICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGFiSWQgPT09IHRhYi5pZCkge1xyXG4gICAgICAgICAgICBsZXQgbmV4dFRhYiA9IHRoaXMudGFic1tpbmRleCArIDFdIHx8IHRoaXMudGFic1tpbmRleCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAobmV4dFRhYikge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJZCA9IG5leHRUYWIuaWQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5pZ25vcmVTZWxlY3RPbmNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBSb3V0ZXIudHJhbnNpdGlvblRvKG5leHRUYWIucGF0aG5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnRhYnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkVGFiKHRhYiA9IHt9KSB7XHJcbiAgICAgICAgICB0YWIuaWQgPz89IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xyXG4gICAgICAgICAgdGFiLnRpdGxlID8/PSBkb2N1bWVudC50aXRsZTtcclxuICAgICAgICAgIHRhYi5wYXRobmFtZSA/Pz0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgICAgICAgdGFiLmljb24gPz89IHRoaXMuZ2V0SWNvbih0YWIucGF0aG5hbWUpO1xyXG4gICAgICAgICAgdGhpcy50YWJzLnB1c2godGFiKTtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJZCA9IHRhYi5pZDtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkQm9va21hcmsodGFiKSB7XHJcbiAgICAgICAgICB0aGlzLmJvb2ttYXJrcy5wdXNoKHsgLi4udGFiIH0pO1xyXG4gICAgICAgICAgdGhpcy5zYXZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkJvb2ttYXJrUmVuYW1lQmx1cihib29rbWFyaywgJGV2ZW50KSB7XHJcbiAgICAgICAgICBib29rbWFyay5pblJlbmFtZU1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgIGJvb2ttYXJrLnRpdGxlID0gJGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25Cb29rbWFya1JlbmFtZUtleVVwKGJvb2ttYXJrLCAkZXZlbnQpIHtcclxuICAgICAgICAgIGlmICgkZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcclxuICAgICAgICAgICAgYm9va21hcmsuaW5SZW5hbWVNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJvb2ttYXJrLnRpdGxlID0gJGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkJvb2ttYXJrQ2xpY2soYm9va21hcmspIHtcclxuICAgICAgICAgIGxldCBvbGRUYWIgPSB0aGlzLnRhYnMuZmluZChpID0+IGkucGF0aG5hbWUgPT09IGJvb2ttYXJrLnBhdGhuYW1lKTtcclxuICAgICAgICAgIGlmIChvbGRUYWIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhYklkID0gb2xkVGFiLmlkO1xyXG4gICAgICAgICAgICB0aGlzLmlnbm9yZVNlbGVjdE9uY2UgPSB0cnVlO1xyXG4gICAgICAgICAgICBSb3V0ZXIudHJhbnNpdGlvblRvKGJvb2ttYXJrLnBhdGhuYW1lKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVGFiKHsgcGF0aG5hbWU6IGJvb2ttYXJrLnBhdGhuYW1lLCB0aXRsZTogYm9va21hcmsudGl0bGUgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaWdub3JlU2VsZWN0T25jZSA9IHRydWU7XHJcbiAgICAgICAgICAgIFJvdXRlci50cmFuc2l0aW9uVG8oYm9va21hcmsucGF0aG5hbWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25Cb29rbWFya0NvbnRleHRNZW51KGJvb2ttYXJrLCBlKSB7XHJcbiAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgIHVpLmNvbnRleHRNZW51cy5vcGVuKGUsIHVpLmNvbnRleHRNZW51cy5idWlsZC5tZW51KFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBpMThuLmZvcm1hdChcIkRFTEVURVwiKSxcclxuICAgICAgICAgICAgICBhY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uQm9va21hcmtEZWxldGUoYm9va21hcmspO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBpMThuLmZvcm1hdChcIlJFTkFNRVwiKSxcclxuICAgICAgICAgICAgICBhY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBib29rbWFyay5pblJlbmFtZU1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0pKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQm9va21hcmtEZWxldGUoYm9va21hcmspIHtcclxuICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuYm9va21hcmtzLmluZGV4T2YoYm9va21hcmspO1xyXG4gICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuO1xyXG4gICAgICAgICAgdGhpcy5ib29rbWFya3Muc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0SWNvbihwYXRoTmFtZSkge1xyXG4gICAgICAgICAgbGV0IHBhdGhuYW1lU3BsaXR0ZWQgPSBwYXRoTmFtZS5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgICBpZiAocGF0aG5hbWVTcGxpdHRlZFsxXSA9PT0gXCJjaGFubmVsc1wiKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXRobmFtZVNwbGl0dGVkWzJdID09PSBcIkBtZVwiKSB7XHJcbiAgICAgICAgICAgICAgbGV0IGNoYW5uZWwgPSBDaGFubmVsU3RvcmUuZ2V0Q2hhbm5lbChwYXRobmFtZVNwbGl0dGVkWzNdKTtcclxuICAgICAgICAgICAgICBpZiAoY2hhbm5lbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwuaXNHcm91cERNKCkgJiYgY2hhbm5lbC5pY29uKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBgaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vY2hhbm5lbC1pY29ucy8ke2NoYW5uZWwuaWR9LyR7Y2hhbm5lbC5pY29ufS53ZWJwP3NpemU9MzJgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsLmlzRE0oKSkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgdXNlcklkID0gY2hhbm5lbC5nZXRSZWNpcGllbnRJZCgpO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgdXNlciA9IFVzZXJTdG9yZS5nZXRVc2VyKHVzZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh1c2VyPy5hdmF0YXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYGh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMvJHt1c2VySWR9LyR7dXNlci5hdmF0YXJ9LndlYnA/c2l6ZT0zMmA7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9lbWJlZC9hdmF0YXJzLyR7dXNlci5kaXNjcmltaW5hdG9yICUgNX0ucG5nYDtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsZXQgZ3VpbGQgPSBHdWlsZFN0b3JlLmdldEd1aWxkKHBhdGhuYW1lU3BsaXR0ZWRbMl0pO1xyXG4gICAgICAgICAgICAgIGlmIChndWlsZD8uaWNvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGBodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9pY29ucy8ke2d1aWxkLmlkfS8ke2d1aWxkLmljb259LndlYnA/c2l6ZT0zMmA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGFwcC5kaXJlY3RpdmUoJ2ZvY3VzJywge1xyXG4gICAgICBtb3VudGVkKGVsKSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBlbC5mb2N1cygpLCAxKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBhcHAubW91bnQodGFic0NvbnRhaW5lcik7XHJcbiAgICBzdWJzY3JpcHRpb25zLnB1c2goKCkgPT4ge1xyXG4gICAgICBhcHAudW5tb3VudCgpO1xyXG4gICAgICB0YWJzQ29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2NsYXNzKj1cInRpdGxlQmFyLVwiXScpLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIHRhYnNDb250YWluZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZVRhYnNDb250YWluZXIoKSB7XHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFicy0tY29udGFpbmVyJykpIHRhYnNDb250YWluZXIucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0YWJzQ29udGFpbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZUluamVjdCgpIHtcclxuICAgICAgcmVtb3ZlVGFic0NvbnRhaW5lcigpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbY2xhc3MqPVwidGl0bGVCYXItXCJdJykuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgdGFic0NvbnRhaW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKFxyXG4gICAgICBldmVudHMub24oXCJNYWluV2luZG93RnVsbFNjcmVlbkV4aXRcIiwgcmVJbmplY3QpLFxyXG4gICAgICBldmVudHMub24oXCJNYWluV2luZG93RnVsbFNjcmVlbkVudGVyXCIsIHJlbW92ZVRhYnNDb250YWluZXIpLFxyXG4gICAgICBldmVudHMub24oXCJDdXJyZW50VXNlckNoYW5nZVwiLCByZUluamVjdCksXHJcbiAgICAgIGV2ZW50cy5vbihcIkxvY2FsZUNoYW5nZVwiLCByZUluamVjdCksXHJcbiAgICApO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgdXRpbHMuaW50ZXJ2YWwoXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgcGlwV0VsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtjbGFzcyo9XCJwaWN0dXJlSW5QaWN0dXJlV2luZG93LVwiXWApO1xyXG4gICAgICAgICAgaWYgKHBpcFdFbG0pIHtcclxuICAgICAgICAgICAgaWYgKHBpcFdFbG0/LmNoaWxkcmVuPy5bMF0/LmdldEF0dHJpYnV0ZT8uKFwic3R5bGVcIikgJiYgIVdpbmRvd1N0b3JlLmlzRWxlbWVudEZ1bGxTY3JlZW4oKSkge1xyXG4gICAgICAgICAgICAgIGxldCBzdHlsZSA9IHV0aWxzLnJlYWN0LmdldFByb3BzKHBpcFdFbG0sIGkgPT4gaT8uc3R5bGUpPy5zdHlsZTtcclxuICAgICAgICAgICAgICBpZiAoc3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIGxldCB2ID0gc3R5bGUudHJhbnNmb3JtLmZpbmQoaSA9PiBpLnRyYW5zbGF0ZVkpLnRyYW5zbGF0ZVk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwib2JqZWN0XCIpIHYgPSB2Ll9wYXJlbnQuX3ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcGlwV0VsbS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBwaXBXRWxtLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpLnJlcGxhY2UodHJhbnNsYXRlWVJlZ2V4LCBgdHJhbnNsYXRlWSgke3YgLSB0YWJzQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodH1weClgKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAxMDAwXHJcbiAgICAgIClcclxuICAgIClcclxuICB9LFxyXG4gIHVubG9hZCgpIHtcclxuICAgIHVubG9hZGVkID0gdHJ1ZTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsidWkiLCJzdWJzY3JpcHRpb25zIiwiZG9tIiwicGVyc2lzdCIsIlVzZXJTdG9yZSIsIlJvdXRlciIsIkZsdXhEaXNwYXRjaGVyIiwiUmVhZFN0YXRlU3RvcmUiLCJldmVudHMiLCJpMThuIiwiQ2hhbm5lbFN0b3JlIiwiR3VpbGRTdG9yZSIsInV0aWxzIiwiV2luZG93U3RvcmUiXSwibWFwcGluZ3MiOiJzdElBT0EsSUFBSSxRQUFRLEdBQUcsS0FBSyxDQUFDO0FBQ3JCLE1BQU0sZUFBZSxHQUFHLHVCQUF1QixDQUFDO0FBQ2hELFlBQWU7QUFDZixFQUFFLE1BQU0sSUFBSSxHQUFHO0FBQ2YsSUFBSSxNQUFNQSxzQkFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDOUIsSUFBSSxJQUFJLFFBQVE7QUFDaEIsTUFBTSxPQUFPO0FBQ2IsSUFBSUMsdUJBQWEsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztBQUNyQyxJQUFJLE1BQU0sYUFBYSxHQUFHQyx1QkFBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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
