(function(k,n,o,g,C,x,v){"use strict";function p(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var c=p(k),T=p(g),d=p(x),w=()=>v.injectCSS(".tabs--container{box-sizing:border-box;display:flex;flex-direction:column;width:100vw;-webkit-app-region:drag}.tabs--container ::-webkit-scrollbar{width:0px;height:0px}.tabs--container.hidden{display:none}.tabs--container>.tab-items,.tabs--container>.bookmarks{box-sizing:border-box;display:flex;align-items:center;width:100vw;max-width:100vw;--item-h: 30px;height:var(--item-h);min-height:var(--item-h);gap:4px;padding:8px 4px 0;transition:.1s ease-in-out opacity;-webkit-app-region:drag;overflow-x:auto;overflow-y:hidden}.tabs--container>.bookmarks{height:var(--item-h);min-height:var(--item-h);background-color:#0000001a;-webkit-app-region:no-drag;padding-top:4px;padding-bottom:4px}.tabs--container>.bookmarks.hidden{display:none}.tabs--container .new-tab{color:#fff;width:12px;height:12px;min-width:12px;min-height:12px;transform:rotate(45deg);cursor:pointer;margin:0 4px;-webkit-app-region:no-drag}.tabs--container .bookmark-item{box-sizing:border-box;-webkit-app-region:no-drag;background-color:#00000040;border-radius:4px;display:flex;align-items:center;justify-content:center;padding:6px;cursor:pointer;opacity:.5;transition:.1s ease-in-out opacity;position:relative}.tabs--container .bookmark-item:hover,.tabs--container .bookmark-item.selected,.tabs--container .bookmark-item:focus-within{opacity:1}.tabs--container .bookmark-item .rename-input{border:none;background-color:transparent;color:#f5f5f5;border-bottom:1px solid whitesmoke;font-size:12px}.tabs--container .bookmark-item .unread{position:absolute;right:-3px;top:-3px;border-radius:50%;background-color:#ed4245;width:12px;height:12px;font-size:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:400}.tabs--container .bookmark-item .unread.plus{font-size:8px}.tabs--container .bookmark-item .unread.hidden{display:none}.tabs--container .bookmark-item .info{display:flex;align-items:center;justify-content:flex-start;gap:4px}.tabs--container .bookmark-item .icon{border-radius:2px;width:8px;height:8px;background-size:cover;background-position:center;background-repeat:no-repeat}.tabs--container .bookmark-item .title{font-size:12px;color:#fff;text-overflow:ellipsis;word-break:keep-all;overflow:hidden;white-space:nowrap;max-width:150px}.tabs--container .tab-item{-webkit-app-region:no-drag;color:#fff;background-color:#00000040;box-sizing:border-box;width:fit-content;height:var(--item-h);display:flex;align-items:center;justify-content:space-between;padding:0 8px;gap:8px;border-top-left-radius:8px;border-top-right-radius:8px;cursor:pointer;opacity:.5;position:relative}.tabs--container .tab-item .unread{position:absolute;right:-4px;top:-4px;border-radius:50%;background-color:#ed4245;width:14px;height:14px;font-size:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:400}.tabs--container .tab-item .unread.plus{font-size:8px}.tabs--container .tab-item .unread.hidden{display:none}.tabs--container .tab-item .info{display:flex;align-items:center;justify-content:flex-start;flex:2;gap:8px}.tabs--container .tab-item .icon{border-radius:4px;width:14px;height:14px;background-size:cover;background-position:center;background-repeat:no-repeat}.tabs--container .tab-item .title{font-size:14px;text-overflow:ellipsis;word-break:keep-all;overflow:hidden;white-space:nowrap;min-width:150px;max-width:250px;flex:1}.tabs--container .tab-item .close{color:#ffffff80;width:12px;height:12px;cursor:pointer;transition:.1s ease-in-out opacity;border-radius:50%;padding:4px;display:flex;align-items:center;justify-content:center}.tabs--container .tab-item .close:hover{background-color:#ffffff1a}.tabs--container .tab-item .close.hidden{opacity:0;pointer-events:none}.tabs--container .tab-item.disabled{opacity:.5;pointer-events:none}.tabs--container .tab-item:hover,.tabs--container .tab-item.selected{opacity:1}.bg__7adbf{top:0!important}");let m=!1;var y={async load(){if(await c.default.vue.ready.when(),m)return;n.subscriptions.push(w());const s=T.default.parse(`
      <div class="tabs--container">
          <div class="tab-items" @wheel="onVerticalScrollWheel">
            <div v-for="tab in tabs" class="tab-item" :class="{'selected': selectedTabId === tab.id}" :key="tab.id" @click="onTabClick(tab, $event)" @mousedown="onTabMouseDown(tab, $event)" @contextmenu="onTabContextMenu(tab, $event)">
              <span class="info">
                  <span class="icon" :style="tab.icon ? \`background-image: url('\${tab.icon}');\` : \`background-color: #5865f2;\`"></span>
                  <span class="title">{{tab.pathname === "/store" ? "Acord" : tab.title}}</span>
              </span>
              <span class="close" :class="{'hidden': tabs.length <= 1}" @click="onTabCloseClick(tab)">
                <svg class="close-icon" viewBox="0 0 12 12">
                  <polygon fill="currentColor" fill-rule="evenodd" points="11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"></polygon>
                </svg>
              </span>
              <span class="unread" :class="{'hidden': !tab.unread}">{{tab.unread}}</span>
            </div>
            <div class="new-tab" @click="onNewTabClick">
              <svg viewBox="0 0 12 12">
                <polygon fill="currentColor" fill-rule="evenodd" points="11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"></polygon>
              </svg>
            </div>
          </div>
          <div v-if="bookmarks.length"  class="bookmarks" @wheel="onVerticalScrollWheel">
            <div v-for="bookmark in bookmarks" :key="bookmark.id" class="bookmark-item" :class="{'selected': selectedTab?.pathname === bookmark.pathname}" @click="onBookmarkClick(bookmark, $event)" @contextmenu="onBookmarkContextMenu(bookmark, $event)">
              <span class="info">
                  <span class="icon" :style="bookmark.icon ? \`background-image: url('\${bookmark.icon}');\` : \`background-color: #5865f2;\`"></span>
                  <span v-if="!bookmark.inRenameMode" class="title">{{bookmark.pathname === "/store" ? "Acord" : bookmark.title}}</span>
                  <input v-else v-focus type="text" class="rename-input" :value="bookmark.title" @blur="onBookmarkRenameBlur(bookmark, $event)" @keyup="onBookmarkRenameKeyUp(bookmark, $event)">
              </span>
              <span class="unread" :class="{'hidden': !bookmark.unread}">{{bookmark.unread}}</span>
            </div>
          </div>
      </div>
    `),b=Vue.createApp({data(){return{tabs:[],bookmarks:[],selectedTabId:null,ignoreSelectOnce:!1}},mounted(){this.tabs=n.persist.ghost?.[o.UserStore.getCurrentUser().id]?.tabs||[],this.bookmarks=n.persist.ghost?.[o.UserStore.getCurrentUser().id]?.bookmarks||[],this.tabs.length||this.addTab(),this.selectedTabId=n.persist.ghost?.[o.UserStore.getCurrentUser().id]?.selectedTabId??this.tabs[0].id,this.ignoreSelectOnce=this.selectedTab.pathname!==window.location.pathname,o.Router.transitionTo(this.selectedTab.pathname),o.FluxDispatcher.subscribe("CHANNEL_SELECT",this.onChannelSelect),o.ReadStateStore.addChangeListener(this.onUnreadChange),d.default.on("DocumentTitleChange",this.onDocumentTitleChange)},unmounted(){o.FluxDispatcher.unsubscribe("CHANNEL_SELECT",this.onChannelSelect),o.ReadStateStore.removeChangeListener(this.onUnreadChange),d.default.off("DocumentTitleChange",this.onDocumentTitleChange)},computed:{selectedTab(){return this.tabs.find(e=>e.id===this.selectedTabId)}},methods:{i18nFormat:n.i18n.format,save(){n.persist.store[o.UserStore.getCurrentUser().id]={tabs:this.tabs,bookmarks:this.bookmarks,selectedTabId:this.selectedTabId}},onTabContextMenu(e,a){const t=this;let i=t.tabs.indexOf(e),r=t.tabs.filter((l,u)=>u>i);c.default.contextMenus.open(a,c.default.contextMenus.build.menu([{type:"text",label:n.i18n.format("CLOSE"),disabled:this.tabs.length<=1,action(){t.onTabCloseClick(e)}},{type:"text",label:n.i18n.format("CLOSE_TABS_TO_RIGHT"),disabled:!r.length,action(){t.tabs.filter((l,u)=>u!=i).forEach(l=>t.onTabCloseClick(l))}},{type:"separator"},{type:"text",label:n.i18n.format("MOVE_TAB_TO_LEFT"),disabled:!i,action(){let[l]=t.tabs.splice(i,1);t.tabs.splice(i-1,0,l),t.save()}},{type:"text",label:n.i18n.format("MOVE_TAB_TO_RIGHT"),disabled:i===t.tabs.length-1,action(){let[l]=t.tabs.splice(i,1);t.tabs.splice(i+1,0,l),t.save()}},{type:"separator"},{type:"text",label:n.i18n.format("ADD_TO_BOOKMARKS"),disabled:!!t.bookmarks.find(l=>l.pathname===e.pathname),action(){t.addBookmark(e)}}]))},async onChannelSelect(){if(this.ignoreSelectOnce){this.ignoreSelectOnce=!1;return}!this.selectedTab||(this.selectedTab.pathname=window.location.pathname,this.selectedTab.icon=this.getIcon(this.selectedTab.pathname),this.save())},onDocumentTitleChange(e){!this.selectedTab||(this.selectedTab.title=e,this.save())},onUnreadChange(){this.tabs.forEach(e=>{let a=e.pathname.split("/");a[1]==="channels"&&a[3]&&(e.unread=o.ReadStateStore.getUnreadCount(a[3])??0)})},onVerticalScrollWheel(e){e.target.scrollBy({left:e.deltaY,behavior:"smooth"})},onNewTabClick(){this.addTab()},onTabClick(e,a){a.target.classList.contains("close")||a.target.classList.contains("close-icon")||(this.selectedTabId=e.id,this.ignoreSelectOnce=!0,o.Router.transitionTo(e.pathname))},onTabMouseDown(e,a){this.tabs.length<=1||a.button===1&&this.onTabCloseClick(e)},onTabCloseClick(e){let a=this.tabs.indexOf(e);if(a!==-1){if(this.selectedTabId===e.id){let t=this.tabs[a+1]||this.tabs[a-1];t&&(this.selectedTabId=t.id,this.ignoreSelectOnce=!0,o.Router.transitionTo(t.pathname))}this.tabs.splice(a,1),this.save()}},addTab(e={}){e.id??=Math.random().toString(36).slice(2),e.title??=document.title,e.pathname??=window.location.pathname,e.icon??=this.getIcon(e.pathname),this.tabs.push(e),this.selectedTabId=e.id,this.save()},addBookmark(e){this.bookmarks.push({...e}),this.save()},onBookmarkRenameBlur(e,a){e.inRenameMode=!1,e.title=a.target.value,this.save()},onBookmarkRenameKeyUp(e,a){a.key==="Enter"&&(e.inRenameMode=!1,e.title=a.target.value,this.save())},onBookmarkClick(e){let a=this.tabs.find(t=>t.pathname===e.pathname);a?(this.selectedTabId=a.id,this.ignoreSelectOnce=!0,o.Router.transitionTo(e.pathname)):(this.addTab({pathname:e.pathname,title:e.title}),this.ignoreSelectOnce=!0,o.Router.transitionTo(e.pathname))},onBookmarkContextMenu(e,a){const t=this;let i=t.bookmarks.indexOf(e);c.default.contextMenus.open(a,c.default.contextMenus.build.menu([{type:"text",label:n.i18n.format("DELETE"),action(){t.onBookmarkDelete(e)}},{type:"text",label:n.i18n.format("RENAME"),action(){e.inRenameMode=!0}},{type:"separator"},{type:"text",label:n.i18n.format("MOVE_BOOKMARK_TO_LEFT"),disabled:!i,action(){let[r]=t.bookmarks.splice(i,1);t.bookmarks.splice(i-1,0,r),t.save()}},{type:"text",label:n.i18n.format("MOVE_BOOKMARK_TO_RIGHT"),disabled:i===t.bookmarks.length-1,action(){let[r]=t.bookmarks.splice(i,1);t.bookmarks.splice(i+1,0,r),t.save()}}]))},onBookmarkDelete(e){let a=this.bookmarks.indexOf(e);a!==-1&&(this.bookmarks.splice(a,1),this.save())},getIcon(e){let a=e.split("/");if(a[1]==="channels")if(a[2]==="@me"){let t=o.ChannelStore.getChannel(a[3]);if(t){if(t.isGroupDM()&&t.icon)return`https://cdn.discordapp.com/channel-icons/${t.id}/${t.icon}.webp?size=32`;if(t.isDM()){let i=t.getRecipientId(),r=o.UserStore.getUser(i);return r?.avatar?`https://cdn.discordapp.com/avatars/${i}/${r.avatar}.webp?size=32`:`https://cdn.discordapp.com/embed/avatars/${r.discriminator%5}.png`}}}else{let t=o.GuildStore.getGuild(a[2]);if(t?.icon)return`https://cdn.discordapp.com/icons/${t.id}/${t.icon}.webp?size=32`}return null}}});b.directive("focus",{mounted(e){setTimeout(()=>e.focus(),1)}}),b.mount(s),n.subscriptions.push(()=>{b.unmount(),s.remove()}),document.querySelector(".titleBar__01af6")?.insertAdjacentElement("afterend",s);function f(){document.querySelector(".tabs--container")&&s.parentElement.removeChild(s)}function h(){f(),document.querySelector(".titleBar__01af6")?.insertAdjacentElement("afterend",s)}n.subscriptions.push(d.default.on("MainWindowFullScreenExit",h),d.default.on("MainWindowFullScreenEnter",f),d.default.on("CurrentUserChange",h),d.default.on("LocaleChange",h))},unload(){m=!0}};return y})($acord.ui,$acord.extension,$acord.modules.common,$acord.dom,$acord.utils,$acord.events,$acord.patcher);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic291cmNlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVpIGZyb20gXCJAYWNvcmQvdWlcIjtcclxuaW1wb3J0IHsgc3Vic2NyaXB0aW9ucywgcGVyc2lzdCwgaTE4biB9IGZyb20gXCJAYWNvcmQvZXh0ZW5zaW9uXCI7XHJcbmltcG9ydCB7IEZsdXhEaXNwYXRjaGVyLCBXaW5kb3dTdG9yZSwgQ2hhbm5lbFN0b3JlLCBVc2VyU3RvcmUsIEd1aWxkU3RvcmUsIFJvdXRlciwgUmVhZFN0YXRlU3RvcmUgfSBmcm9tIFwiQGFjb3JkL21vZHVsZXMvY29tbW9uXCI7XHJcbmltcG9ydCBkb20gZnJvbSBcIkBhY29yZC9kb21cIjtcclxuaW1wb3J0IHV0aWxzIGZyb20gXCJAYWNvcmQvdXRpbHNcIjtcclxuaW1wb3J0IGV2ZW50cyBmcm9tIFwiQGFjb3JkL2V2ZW50c1wiO1xyXG5cclxuaW1wb3J0IGluamVjdFNDU1MgZnJvbSBcIi4vc3R5bGVzLnNjc3NcIjtcclxuXHJcbmxldCB1bmxvYWRlZCA9IGZhbHNlO1xyXG5cclxuY29uc3QgdHJhbnNsYXRlWVJlZ2V4ID0gL3RyYW5zbGF0ZVlcXCgoW14pXSspXFwpLztcclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGFzeW5jIGxvYWQoKSB7XHJcbiAgICBhd2FpdCB1aS52dWUucmVhZHkud2hlbigpO1xyXG4gICAgaWYgKHVubG9hZGVkKSByZXR1cm47XHJcblxyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGluamVjdFNDU1MoKSk7XHJcbiAgICAvKiogQHR5cGUge0VsZW1lbnR9ICovXHJcbiAgICBjb25zdCB0YWJzQ29udGFpbmVyID0gZG9tLnBhcnNlKGBcclxuICAgICAgPGRpdiBjbGFzcz1cInRhYnMtLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1pdGVtc1wiIEB3aGVlbD1cIm9uVmVydGljYWxTY3JvbGxXaGVlbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IHYtZm9yPVwidGFiIGluIHRhYnNcIiBjbGFzcz1cInRhYi1pdGVtXCIgOmNsYXNzPVwieydzZWxlY3RlZCc6IHNlbGVjdGVkVGFiSWQgPT09IHRhYi5pZH1cIiA6a2V5PVwidGFiLmlkXCIgQGNsaWNrPVwib25UYWJDbGljayh0YWIsICRldmVudClcIiBAbW91c2Vkb3duPVwib25UYWJNb3VzZURvd24odGFiLCAkZXZlbnQpXCIgQGNvbnRleHRtZW51PVwib25UYWJDb250ZXh0TWVudSh0YWIsICRldmVudClcIj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm9cIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uXCIgOnN0eWxlPVwidGFiLmljb24gPyBcXGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1xcJHt0YWIuaWNvbn0nKTtcXGAgOiBcXGBiYWNrZ3JvdW5kLWNvbG9yOiAjNTg2NWYyO1xcYFwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPnt7dGFiLnBhdGhuYW1lID09PSBcIi9zdG9yZVwiID8gXCJBY29yZFwiIDogdGFiLnRpdGxlfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2xvc2VcIiA6Y2xhc3M9XCJ7J2hpZGRlbic6IHRhYnMubGVuZ3RoIDw9IDF9XCIgQGNsaWNrPVwib25UYWJDbG9zZUNsaWNrKHRhYilcIj5cclxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJjbG9zZS1pY29uXCIgdmlld0JveD1cIjAgMCAxMiAxMlwiPlxyXG4gICAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPVwiY3VycmVudENvbG9yXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiIHBvaW50cz1cIjExIDEuNTc2IDYuNTgzIDYgMTEgMTAuNDI0IDEwLjQyNCAxMSA2IDYuNTgzIDEuNTc2IDExIDEgMTAuNDI0IDUuNDE3IDYgMSAxLjU3NiAxLjU3NiAxIDYgNS40MTcgMTAuNDI0IDFcIj48L3BvbHlnb24+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1bnJlYWRcIiA6Y2xhc3M9XCJ7J2hpZGRlbic6ICF0YWIudW5yZWFkfVwiPnt7dGFiLnVucmVhZH19PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5ldy10YWJcIiBAY2xpY2s9XCJvbk5ld1RhYkNsaWNrXCI+XHJcbiAgICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDEyIDEyXCI+XHJcbiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPVwiY3VycmVudENvbG9yXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiIHBvaW50cz1cIjExIDEuNTc2IDYuNTgzIDYgMTEgMTAuNDI0IDEwLjQyNCAxMSA2IDYuNTgzIDEuNTc2IDExIDEgMTAuNDI0IDUuNDE3IDYgMSAxLjU3NiAxLjU3NiAxIDYgNS40MTcgMTAuNDI0IDFcIj48L3BvbHlnb24+XHJcbiAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IHYtaWY9XCJib29rbWFya3MubGVuZ3RoXCIgIGNsYXNzPVwiYm9va21hcmtzXCIgQHdoZWVsPVwib25WZXJ0aWNhbFNjcm9sbFdoZWVsXCI+XHJcbiAgICAgICAgICAgIDxkaXYgdi1mb3I9XCJib29rbWFyayBpbiBib29rbWFya3NcIiA6a2V5PVwiYm9va21hcmsuaWRcIiBjbGFzcz1cImJvb2ttYXJrLWl0ZW1cIiA6Y2xhc3M9XCJ7J3NlbGVjdGVkJzogc2VsZWN0ZWRUYWI/LnBhdGhuYW1lID09PSBib29rbWFyay5wYXRobmFtZX1cIiBAY2xpY2s9XCJvbkJvb2ttYXJrQ2xpY2soYm9va21hcmssICRldmVudClcIiBAY29udGV4dG1lbnU9XCJvbkJvb2ttYXJrQ29udGV4dE1lbnUoYm9va21hcmssICRldmVudClcIj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm9cIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uXCIgOnN0eWxlPVwiYm9va21hcmsuaWNvbiA/IFxcYGJhY2tncm91bmQtaW1hZ2U6IHVybCgnXFwke2Jvb2ttYXJrLmljb259Jyk7XFxgIDogXFxgYmFja2dyb3VuZC1jb2xvcjogIzU4NjVmMjtcXGBcIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIHYtaWY9XCIhYm9va21hcmsuaW5SZW5hbWVNb2RlXCIgY2xhc3M9XCJ0aXRsZVwiPnt7Ym9va21hcmsucGF0aG5hbWUgPT09IFwiL3N0b3JlXCIgPyBcIkFjb3JkXCIgOiBib29rbWFyay50aXRsZX19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdi1lbHNlIHYtZm9jdXMgdHlwZT1cInRleHRcIiBjbGFzcz1cInJlbmFtZS1pbnB1dFwiIDp2YWx1ZT1cImJvb2ttYXJrLnRpdGxlXCIgQGJsdXI9XCJvbkJvb2ttYXJrUmVuYW1lQmx1cihib29rbWFyaywgJGV2ZW50KVwiIEBrZXl1cD1cIm9uQm9va21hcmtSZW5hbWVLZXlVcChib29rbWFyaywgJGV2ZW50KVwiPlxyXG4gICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInVucmVhZFwiIDpjbGFzcz1cInsnaGlkZGVuJzogIWJvb2ttYXJrLnVucmVhZH1cIj57e2Jvb2ttYXJrLnVucmVhZH19PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGApO1xyXG5cclxuICAgIGNvbnN0IGFwcCA9IFZ1ZS5jcmVhdGVBcHAoe1xyXG4gICAgICBkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB0YWJzOiBbXSxcclxuICAgICAgICAgIGJvb2ttYXJrczogW10sXHJcbiAgICAgICAgICBzZWxlY3RlZFRhYklkOiBudWxsLFxyXG4gICAgICAgICAgaWdub3JlU2VsZWN0T25jZTogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIG1vdW50ZWQoKSB7XHJcbiAgICAgICAgdGhpcy50YWJzID0gcGVyc2lzdC5naG9zdD8uW1VzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpLmlkXT8udGFicyB8fCBbXTtcclxuICAgICAgICB0aGlzLmJvb2ttYXJrcyA9IHBlcnNpc3QuZ2hvc3Q/LltVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKS5pZF0/LmJvb2ttYXJrcyB8fCBbXTtcclxuICAgICAgICBpZiAoIXRoaXMudGFicy5sZW5ndGgpIHRoaXMuYWRkVGFiKCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFRhYklkID0gcGVyc2lzdC5naG9zdD8uW1VzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpLmlkXT8uc2VsZWN0ZWRUYWJJZCA/PyB0aGlzLnRhYnNbMF0uaWQ7XHJcbiAgICAgICAgdGhpcy5pZ25vcmVTZWxlY3RPbmNlID0gdGhpcy5zZWxlY3RlZFRhYi5wYXRobmFtZSAhPT0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgICAgIFJvdXRlci50cmFuc2l0aW9uVG8odGhpcy5zZWxlY3RlZFRhYi5wYXRobmFtZSk7XHJcblxyXG4gICAgICAgIEZsdXhEaXNwYXRjaGVyLnN1YnNjcmliZShcIkNIQU5ORUxfU0VMRUNUXCIsIHRoaXMub25DaGFubmVsU2VsZWN0KTtcclxuICAgICAgICBSZWFkU3RhdGVTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uVW5yZWFkQ2hhbmdlKTtcclxuICAgICAgICBldmVudHMub24oXCJEb2N1bWVudFRpdGxlQ2hhbmdlXCIsIHRoaXMub25Eb2N1bWVudFRpdGxlQ2hhbmdlKTtcclxuICAgICAgfSxcclxuICAgICAgdW5tb3VudGVkKCkge1xyXG4gICAgICAgIEZsdXhEaXNwYXRjaGVyLnVuc3Vic2NyaWJlKFwiQ0hBTk5FTF9TRUxFQ1RcIiwgdGhpcy5vbkNoYW5uZWxTZWxlY3QpO1xyXG4gICAgICAgIFJlYWRTdGF0ZVN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25VbnJlYWRDaGFuZ2UpO1xyXG4gICAgICAgIGV2ZW50cy5vZmYoXCJEb2N1bWVudFRpdGxlQ2hhbmdlXCIsIHRoaXMub25Eb2N1bWVudFRpdGxlQ2hhbmdlKTtcclxuICAgICAgfSxcclxuICAgICAgY29tcHV0ZWQ6IHtcclxuICAgICAgICBzZWxlY3RlZFRhYigpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnRhYnMuZmluZChpID0+IGkuaWQgPT09IHRoaXMuc2VsZWN0ZWRUYWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgaTE4bkZvcm1hdDogaTE4bi5mb3JtYXQsXHJcbiAgICAgICAgc2F2ZSgpIHtcclxuICAgICAgICAgIHBlcnNpc3Quc3RvcmVbVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCkuaWRdID0ge1xyXG4gICAgICAgICAgICB0YWJzOiB0aGlzLnRhYnMsXHJcbiAgICAgICAgICAgIGJvb2ttYXJrczogdGhpcy5ib29rbWFya3MsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVGFiSWQ6IHRoaXMuc2VsZWN0ZWRUYWJJZFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uVGFiQ29udGV4dE1lbnUodGFiLCBlKSB7XHJcbiAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgIGxldCBteUluZGV4ID0gc2VsZi50YWJzLmluZGV4T2YodGFiKTtcclxuICAgICAgICAgIGxldCB0YWJzQWZ0ZXJNZSA9IHNlbGYudGFicy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ID4gbXlJbmRleCk7XHJcbiAgICAgICAgICB1aS5jb250ZXh0TWVudXMub3BlbihlLCB1aS5jb250ZXh0TWVudXMuYnVpbGQubWVudShbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICBsYWJlbDogaTE4bi5mb3JtYXQoXCJDTE9TRVwiKSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy50YWJzLmxlbmd0aCA8PSAxLFxyXG4gICAgICAgICAgICAgIGFjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYub25UYWJDbG9zZUNsaWNrKHRhYik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgbGFiZWw6IGkxOG4uZm9ybWF0KFwiQ0xPU0VfVEFCU19UT19SSUdIVFwiKSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogIXRhYnNBZnRlck1lLmxlbmd0aCxcclxuICAgICAgICAgICAgICBhY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRhYnMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAhPSBteUluZGV4KS5mb3JFYWNoKGkgPT4gc2VsZi5vblRhYkNsb3NlQ2xpY2soaSkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHR5cGU6IFwic2VwYXJhdG9yXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBpMThuLmZvcm1hdChcIk1PVkVfVEFCX1RPX0xFRlRcIiksXHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFteUluZGV4LFxyXG4gICAgICAgICAgICAgIGFjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGxldCBbaXRlbV0gPSBzZWxmLnRhYnMuc3BsaWNlKG15SW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50YWJzLnNwbGljZShteUluZGV4IC0gMSwgMCwgaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNhdmUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICBsYWJlbDogaTE4bi5mb3JtYXQoXCJNT1ZFX1RBQl9UT19SSUdIVFwiKSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogbXlJbmRleCA9PT0gKHNlbGYudGFicy5sZW5ndGggLSAxKSxcclxuICAgICAgICAgICAgICBhY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgW2l0ZW1dID0gc2VsZi50YWJzLnNwbGljZShteUluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIHNlbGYudGFicy5zcGxpY2UobXlJbmRleCArIDEsIDAsIGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdHlwZTogXCJzZXBhcmF0b3JcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgbGFiZWw6IGkxOG4uZm9ybWF0KFwiQUREX1RPX0JPT0tNQVJLU1wiKSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogISFzZWxmLmJvb2ttYXJrcy5maW5kKGkgPT4gaS5wYXRobmFtZSA9PT0gdGFiLnBhdGhuYW1lKSxcclxuICAgICAgICAgICAgICBhY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmFkZEJvb2ttYXJrKHRhYik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSkpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhc3luYyBvbkNoYW5uZWxTZWxlY3QoKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5pZ25vcmVTZWxlY3RPbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaWdub3JlU2VsZWN0T25jZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRUYWIpIHJldHVybjtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWIucGF0aG5hbWUgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFiLmljb24gPSB0aGlzLmdldEljb24odGhpcy5zZWxlY3RlZFRhYi5wYXRobmFtZSk7XHJcbiAgICAgICAgICB0aGlzLnNhdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRG9jdW1lbnRUaXRsZUNoYW5nZSh0aXRsZSkge1xyXG4gICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkVGFiKSByZXR1cm47XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFiLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgICB0aGlzLnNhdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uVW5yZWFkQ2hhbmdlKCkge1xyXG4gICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goKHRhYikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcGF0aG5hbWVTcGxpdHRlZCA9IHRhYi5wYXRobmFtZS5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgICAgIGlmIChwYXRobmFtZVNwbGl0dGVkWzFdID09PSBcImNoYW5uZWxzXCIgJiYgcGF0aG5hbWVTcGxpdHRlZFszXSkge1xyXG4gICAgICAgICAgICAgIHRhYi51bnJlYWQgPSBSZWFkU3RhdGVTdG9yZS5nZXRVbnJlYWRDb3VudChwYXRobmFtZVNwbGl0dGVkWzNdKSA/PyAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uVmVydGljYWxTY3JvbGxXaGVlbChlKSB7XHJcbiAgICAgICAgICBlLnRhcmdldC5zY3JvbGxCeSh7XHJcbiAgICAgICAgICAgIGxlZnQ6IGUuZGVsdGFZLFxyXG4gICAgICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbk5ld1RhYkNsaWNrKCkge1xyXG4gICAgICAgICAgdGhpcy5hZGRUYWIoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uVGFiQ2xpY2sodGFiLCBlKSB7XHJcbiAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2xvc2VcIikgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2xvc2UtaWNvblwiKSkgcmV0dXJuO1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhYklkID0gdGFiLmlkO1xyXG4gICAgICAgICAgdGhpcy5pZ25vcmVTZWxlY3RPbmNlID0gdHJ1ZTtcclxuICAgICAgICAgIFJvdXRlci50cmFuc2l0aW9uVG8odGFiLnBhdGhuYW1lKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uVGFiTW91c2VEb3duKHRhYiwgZSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMudGFicy5sZW5ndGggPD0gMSkgcmV0dXJuO1xyXG4gICAgICAgICAgaWYgKGUuYnV0dG9uID09PSAxKSB0aGlzLm9uVGFiQ2xvc2VDbGljayh0YWIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25UYWJDbG9zZUNsaWNrKHRhYikge1xyXG4gICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy50YWJzLmluZGV4T2YodGFiKTtcclxuICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybjtcclxuICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGFiSWQgPT09IHRhYi5pZCkge1xyXG4gICAgICAgICAgICBsZXQgbmV4dFRhYiA9IHRoaXMudGFic1tpbmRleCArIDFdIHx8IHRoaXMudGFic1tpbmRleCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAobmV4dFRhYikge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJZCA9IG5leHRUYWIuaWQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5pZ25vcmVTZWxlY3RPbmNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBSb3V0ZXIudHJhbnNpdGlvblRvKG5leHRUYWIucGF0aG5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnRhYnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkVGFiKHRhYiA9IHt9KSB7XHJcbiAgICAgICAgICB0YWIuaWQgPz89IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xyXG4gICAgICAgICAgdGFiLnRpdGxlID8/PSBkb2N1bWVudC50aXRsZTtcclxuICAgICAgICAgIHRhYi5wYXRobmFtZSA/Pz0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgICAgICAgdGFiLmljb24gPz89IHRoaXMuZ2V0SWNvbih0YWIucGF0aG5hbWUpO1xyXG4gICAgICAgICAgdGhpcy50YWJzLnB1c2godGFiKTtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJZCA9IHRhYi5pZDtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkQm9va21hcmsodGFiKSB7XHJcbiAgICAgICAgICB0aGlzLmJvb2ttYXJrcy5wdXNoKHsgLi4udGFiIH0pO1xyXG4gICAgICAgICAgdGhpcy5zYXZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkJvb2ttYXJrUmVuYW1lQmx1cihib29rbWFyaywgJGV2ZW50KSB7XHJcbiAgICAgICAgICBib29rbWFyay5pblJlbmFtZU1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgIGJvb2ttYXJrLnRpdGxlID0gJGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25Cb29rbWFya1JlbmFtZUtleVVwKGJvb2ttYXJrLCAkZXZlbnQpIHtcclxuICAgICAgICAgIGlmICgkZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcclxuICAgICAgICAgICAgYm9va21hcmsuaW5SZW5hbWVNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJvb2ttYXJrLnRpdGxlID0gJGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkJvb2ttYXJrQ2xpY2soYm9va21hcmspIHtcclxuICAgICAgICAgIGxldCBvbGRUYWIgPSB0aGlzLnRhYnMuZmluZChpID0+IGkucGF0aG5hbWUgPT09IGJvb2ttYXJrLnBhdGhuYW1lKTtcclxuICAgICAgICAgIGlmIChvbGRUYWIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhYklkID0gb2xkVGFiLmlkO1xyXG4gICAgICAgICAgICB0aGlzLmlnbm9yZVNlbGVjdE9uY2UgPSB0cnVlO1xyXG4gICAgICAgICAgICBSb3V0ZXIudHJhbnNpdGlvblRvKGJvb2ttYXJrLnBhdGhuYW1lKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVGFiKHsgcGF0aG5hbWU6IGJvb2ttYXJrLnBhdGhuYW1lLCB0aXRsZTogYm9va21hcmsudGl0bGUgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaWdub3JlU2VsZWN0T25jZSA9IHRydWU7XHJcbiAgICAgICAgICAgIFJvdXRlci50cmFuc2l0aW9uVG8oYm9va21hcmsucGF0aG5hbWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25Cb29rbWFya0NvbnRleHRNZW51KGJvb2ttYXJrLCBlKSB7XHJcbiAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgIGxldCBteUluZGV4ID0gc2VsZi5ib29rbWFya3MuaW5kZXhPZihib29rbWFyayk7XHJcbiAgICAgICAgICB1aS5jb250ZXh0TWVudXMub3BlbihlLCB1aS5jb250ZXh0TWVudXMuYnVpbGQubWVudShbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICBsYWJlbDogaTE4bi5mb3JtYXQoXCJERUxFVEVcIiksXHJcbiAgICAgICAgICAgICAgYWN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vbkJvb2ttYXJrRGVsZXRlKGJvb2ttYXJrKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICBsYWJlbDogaTE4bi5mb3JtYXQoXCJSRU5BTUVcIiksXHJcbiAgICAgICAgICAgICAgYWN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYm9va21hcmsuaW5SZW5hbWVNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInNlcGFyYXRvclwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICBsYWJlbDogaTE4bi5mb3JtYXQoXCJNT1ZFX0JPT0tNQVJLX1RPX0xFRlRcIiksXHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFteUluZGV4LFxyXG4gICAgICAgICAgICAgIGFjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGxldCBbaXRlbV0gPSBzZWxmLmJvb2ttYXJrcy5zcGxpY2UobXlJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmJvb2ttYXJrcy5zcGxpY2UobXlJbmRleCAtIDEsIDAsIGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgbGFiZWw6IGkxOG4uZm9ybWF0KFwiTU9WRV9CT09LTUFSS19UT19SSUdIVFwiKSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogbXlJbmRleCA9PT0gKHNlbGYuYm9va21hcmtzLmxlbmd0aCAtIDEpLFxyXG4gICAgICAgICAgICAgIGFjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGxldCBbaXRlbV0gPSBzZWxmLmJvb2ttYXJrcy5zcGxpY2UobXlJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmJvb2ttYXJrcy5zcGxpY2UobXlJbmRleCArIDEsIDAsIGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25Cb29rbWFya0RlbGV0ZShib29rbWFyaykge1xyXG4gICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5ib29rbWFya3MuaW5kZXhPZihib29rbWFyayk7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm47XHJcbiAgICAgICAgICB0aGlzLmJvb2ttYXJrcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgdGhpcy5zYXZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRJY29uKHBhdGhOYW1lKSB7XHJcbiAgICAgICAgICBsZXQgcGF0aG5hbWVTcGxpdHRlZCA9IHBhdGhOYW1lLnNwbGl0KFwiL1wiKTtcclxuICAgICAgICAgIGlmIChwYXRobmFtZVNwbGl0dGVkWzFdID09PSBcImNoYW5uZWxzXCIpIHtcclxuICAgICAgICAgICAgaWYgKHBhdGhuYW1lU3BsaXR0ZWRbMl0gPT09IFwiQG1lXCIpIHtcclxuICAgICAgICAgICAgICBsZXQgY2hhbm5lbCA9IENoYW5uZWxTdG9yZS5nZXRDaGFubmVsKHBhdGhuYW1lU3BsaXR0ZWRbM10pO1xyXG4gICAgICAgICAgICAgIGlmIChjaGFubmVsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhbm5lbC5pc0dyb3VwRE0oKSAmJiBjaGFubmVsLmljb24pIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGBodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9jaGFubmVsLWljb25zLyR7Y2hhbm5lbC5pZH0vJHtjaGFubmVsLmljb259LndlYnA/c2l6ZT0zMmA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWwuaXNETSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCB1c2VySWQgPSBjaGFubmVsLmdldFJlY2lwaWVudElkKCk7XHJcbiAgICAgICAgICAgICAgICAgIGxldCB1c2VyID0gVXNlclN0b3JlLmdldFVzZXIodXNlcklkKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKHVzZXI/LmF2YXRhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXZhdGFycy8ke3VzZXJJZH0vJHt1c2VyLmF2YXRhcn0ud2VicD9zaXplPTMyYDtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYGh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2VtYmVkL2F2YXRhcnMvJHt1c2VyLmRpc2NyaW1pbmF0b3IgJSA1fS5wbmdgO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxldCBndWlsZCA9IEd1aWxkU3RvcmUuZ2V0R3VpbGQocGF0aG5hbWVTcGxpdHRlZFsyXSk7XHJcbiAgICAgICAgICAgICAgaWYgKGd1aWxkPy5pY29uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYGh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2ljb25zLyR7Z3VpbGQuaWR9LyR7Z3VpbGQuaWNvbn0ud2VicD9zaXplPTMyYDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXBwLmRpcmVjdGl2ZSgnZm9jdXMnLCB7XHJcbiAgICAgIG1vdW50ZWQoZWwpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGVsLmZvY3VzKCksIDEpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGFwcC5tb3VudCh0YWJzQ29udGFpbmVyKTtcclxuICAgIHN1YnNjcmlwdGlvbnMucHVzaCgoKSA9PiB7XHJcbiAgICAgIGFwcC51bm1vdW50KCk7XHJcbiAgICAgIHRhYnNDb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGVCYXJfXzAxYWY2Jyk/Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIHRhYnNDb250YWluZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZVRhYnNDb250YWluZXIoKSB7XHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFicy0tY29udGFpbmVyJykpIHRhYnNDb250YWluZXIucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0YWJzQ29udGFpbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZUluamVjdCgpIHtcclxuICAgICAgcmVtb3ZlVGFic0NvbnRhaW5lcigpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGVCYXJfXzAxYWY2Jyk/Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIHRhYnNDb250YWluZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgZXZlbnRzLm9uKFwiTWFpbldpbmRvd0Z1bGxTY3JlZW5FeGl0XCIsIHJlSW5qZWN0KSxcclxuICAgICAgZXZlbnRzLm9uKFwiTWFpbldpbmRvd0Z1bGxTY3JlZW5FbnRlclwiLCByZW1vdmVUYWJzQ29udGFpbmVyKSxcclxuICAgICAgZXZlbnRzLm9uKFwiQ3VycmVudFVzZXJDaGFuZ2VcIiwgcmVJbmplY3QpLFxyXG4gICAgICBldmVudHMub24oXCJMb2NhbGVDaGFuZ2VcIiwgcmVJbmplY3QpLFxyXG4gICAgKTtcclxuICB9LFxyXG4gIHVubG9hZCgpIHtcclxuICAgIHVubG9hZGVkID0gdHJ1ZTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsidWkiLCJzdWJzY3JpcHRpb25zIiwiZG9tIiwicGVyc2lzdCIsIlVzZXJTdG9yZSIsIlJvdXRlciIsIkZsdXhEaXNwYXRjaGVyIiwiUmVhZFN0YXRlU3RvcmUiLCJldmVudHMiLCJpMThuIiwiQ2hhbm5lbFN0b3JlIiwiR3VpbGRTdG9yZSJdLCJtYXBwaW5ncyI6InVwSUFPQSxJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUM7QUFFckIsWUFBZTtBQUNmLEVBQUUsTUFBTSxJQUFJLEdBQUc7QUFDZixJQUFJLE1BQU1BLHNCQUFFLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztB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
